<!DOCTYPE html><html lang="[&quot;en&quot;,&quot;zh-CN&quot;,&quot;default&quot;]"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Npc"><meta name="copyright" content="Npc"><meta name="generator" content="Hexo 7.1.1"><meta name="theme" content="hexo-theme-yun"><title>计算机网络学习笔记3 | Npc | Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/my_blog_prism@1.0.5/prism.css"><script src="https://cdn.jsdelivr.net/npm/my_blog_prism@1.0.5/prism.js"></script><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"npc0vo.github.io","root":"/","title":"Npc小站","version":"1.10.11","mode":"light","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"waline":{"config":{"enable":true,"serverURL":"https://waline-onelastchicks-projects.vercel.app/","comment":false,"el":"#waline","lang":["en","zh-CN","default"]},"cdn":"https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="Chap4 网络层  网络层概述 网络层在数据链路层提供的两个相邻端点之间的数据帧的传送功能上，进一步管理网络中的数据通信，将数据设法从源端经过若干个中间节点传送到目的端，从而向运输层提供最基本的端到端的数据传送服务。   网络层关键功能  路由（控制面）  选择数据报从源端到目的端的路径 核心：路由算法与协议   转发（数据面）  将数据报从路由器的输入接口传送到正确的输出接口     Int">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络学习笔记3">
<meta property="og:url" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/index.html">
<meta property="og:site_name" content="Npc | Blog">
<meta property="og:description" content="Chap4 网络层  网络层概述 网络层在数据链路层提供的两个相邻端点之间的数据帧的传送功能上，进一步管理网络中的数据通信，将数据设法从源端经过若干个中间节点传送到目的端，从而向运输层提供最基本的端到端的数据传送服务。   网络层关键功能  路由（控制面）  选择数据报从源端到目的端的路径 核心：路由算法与协议   转发（数据面）  将数据报从路由器的输入接口传送到正确的输出接口     Int">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476647642-3.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476903371-6.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476906604-9.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476944922-12.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477147753-15.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477158853-18.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477247006-21.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477278031-24.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/20210630211225120.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477584269-29.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477764029-32.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477783158-35.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477831964-38.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478028837-41.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478143918-44.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478181593-47.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478293990-54.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478321968-57.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478351584-60.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478366407-63.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478371392-66.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478378629-69.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478428438-72.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478508030-75.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478543030-78.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478598864-81.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478726197-84.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478793690-87.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478804134-90.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478884414-93.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479085515-96.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479116655-99.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479218048-102.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479468262-105.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479604386-108.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479702586-111.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479713077-114.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479766253-117.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479770224-120.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479779966-123.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479827066-126.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479836850-129.png">
<meta property="article:published_time" content="2024-07-14T06:10:50.000Z">
<meta property="article:modified_time" content="2024-07-25T02:40:39.402Z">
<meta property="article:author" content="Npc">
<meta property="article:tag" content="学习笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Npc"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Npc"><span class="site-author-status">😭</span></a><div class="site-author-name"><a href="/about/">Npc</a></div><span class="site-name">Npc | Blog</span><sub class="site-subtitle">又活了一天</sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">78</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">12</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">17</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="留言板"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/npc0vo" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@1930278836@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.yuque.com/npc0vo" title="Yuque" target="_blank" style="color:#a0c69d"><span class="icon iconify" data-icon="ri:yuque-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#chap4-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text"> Chap4 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text"> 网络层概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%85%B3%E9%94%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.</span> <span class="toc-text"> 网络层关键功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internet%E5%9B%BD%E9%99%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.3.</span> <span class="toc-text"> Internet国际协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 基本功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text"> IPV4数据报格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="toc-number">1.3.4.</span> <span class="toc-text"> 数据报分片</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%89%87%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.3.4.1.</span> <span class="toc-text"> 分片原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%89%87%E7%AD%96%E7%95%A5"><span class="toc-number">1.3.4.2.</span> <span class="toc-text"> 分片策略</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE%E4%BB%A5%E5%8F%8A%E6%8A%A5%E5%A4%B4%E5%AD%97%E6%AE%B5%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.5.</span> <span class="toc-text"> IP协议以及报头字段总结</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.5.1.</span> <span class="toc-text"> 网络层基本功能</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.</span> <span class="toc-text"> IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 子网划分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E7%B1%BB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 无类域间路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dhcp%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.</span> <span class="toc-text"> DHCP动态主机配置协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arp%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.</span> <span class="toc-text"> ARP地址解析协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ip-%E4%B8%8E-mac%E5%9C%B0%E5%9D%80"><span class="toc-number">1.6.1.</span> <span class="toc-text"> IP 与 MAC地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arp%E5%8D%8F%E8%AE%AE%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.6.2.</span> <span class="toc-text"> ARP协议工作过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">1.6.3.</span> <span class="toc-text"> 路由到另一个局域网</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat"><span class="toc-number">1.7.</span> <span class="toc-text"> 网络地址转换NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.7.1.</span> <span class="toc-text"> 定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nat%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6"><span class="toc-number">1.7.2.</span> <span class="toc-text"> NAT工作机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp-%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.8.</span> <span class="toc-text"> ICMP: 互联网控制报文协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-2"><span class="toc-number">1.8.1.</span> <span class="toc-text"> ICMP: 互联网控制报文协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp%E6%8A%A5%E6%96%87%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.8.2.</span> <span class="toc-text"> ICMP报文类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.8.3.</span> <span class="toc-text"> ICMP 报文格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp%E6%8A%A5%E6%96%87%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%8A%9F%E8%83%BD"><span class="toc-number">1.8.4.</span> <span class="toc-text"> ICMP报文类型及功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">1.9.</span> <span class="toc-text"> 路由算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1"><span class="toc-number">1.9.1.</span> <span class="toc-text"> 距离向量路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E8%BF%87%E7%A8%8B"><span class="toc-number">1.9.1.1.</span> <span class="toc-text"> 算法过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E8%80%83%E8%99%91"><span class="toc-number">1.9.1.2.</span> <span class="toc-text"> 特殊情况考虑</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">1.9.2.</span> <span class="toc-text"> 链路状态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E8%BF%87%E7%A8%8B-2"><span class="toc-number">1.9.2.1.</span> <span class="toc-text"> 算法过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E5%92%8C%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%83"><span class="toc-number">1.9.3.</span> <span class="toc-text"> 距离向量和链路状态算法比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%82%E6%AC%A1%E8%B7%AF%E7%94%B1"><span class="toc-number">1.9.4.</span> <span class="toc-text"> 层次路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.9.4.1.</span> <span class="toc-text"> 产生原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF"><span class="toc-number">1.9.4.2.</span> <span class="toc-text"> 基本思路</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%88%E6%9E%9C"><span class="toc-number">1.9.4.3.</span> <span class="toc-text"> 效果</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E8%B7%AF%E7%94%B1"><span class="toc-number">1.9.5.</span> <span class="toc-text"> 广播路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">1.9.5.1.</span> <span class="toc-text"> 实现方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internet%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.10.</span> <span class="toc-text"> Internet路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.10.1.</span> <span class="toc-text"> 路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">1.10.1.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.10.1.2.</span> <span class="toc-text"> 工作过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.10.1.3.</span> <span class="toc-text"> 小结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bgp-%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.10.2.</span> <span class="toc-text"> BGP-外部网关路由协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.11.</span> <span class="toc-text"> 路由器的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="toc-number">1.11.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A7%E5%88%B6%E5%B1%82"><span class="toc-number">1.11.2.</span> <span class="toc-text"> 路由器控制层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%B1%82"><span class="toc-number">1.11.3.</span> <span class="toc-text"> 路由器数据层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E7%A7%8D%E5%85%B8%E5%9E%8B%E7%9A%84%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84"><span class="toc-number">1.11.4.</span> <span class="toc-text"> 3种典型的交换结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">1.12.</span> <span class="toc-text"> 拥塞控制算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-4"><span class="toc-number">1.12.1.</span> <span class="toc-text"> 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6congestion-control"><span class="toc-number">1.12.1.1.</span> <span class="toc-text"> 拥塞控制（congestion control）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A7%E7%94%9F%E6%8B%A5%E5%A1%9E%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.12.1.2.</span> <span class="toc-text"> 产生拥塞的原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%AD%96%E7%95%A5"><span class="toc-number">1.12.1.3.</span> <span class="toc-text"> 拥塞控制的基本策略</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E8%B0%83%E8%8A%82"><span class="toc-number">1.12.2.</span> <span class="toc-text"> 流量调节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%97%A9%E6%9C%9F%E6%A3%80%E6%B5%8Bred-random-early-detection"><span class="toc-number">1.12.3.</span> <span class="toc-text"> 随机早期检测RED (Random Early Detection)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A2%E5%BC%83%E6%A6%82%E7%8E%87-p-%E4%B8%8E-thmin-%E5%92%8C-thmax-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.12.4.</span> <span class="toc-text"> 丢弃概率 p 与 THmin 和 Thmax 的关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%B4%A8%E9%87%8F"><span class="toc-number">1.13.</span> <span class="toc-text"> 服务质量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-5"><span class="toc-number">1.13.1.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E8%B4%A8%E9%87%8Fqos-quality-of-service"><span class="toc-number">1.13.2.</span> <span class="toc-text"> 什么是网络服务质量？（QoS, Quality of Service）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%95%B4%E5%BD%A2"><span class="toc-number">1.13.3.</span> <span class="toc-text"> 流量整形</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%8F%E6%A1%B6%E7%AE%97%E6%B3%95"><span class="toc-number">1.13.3.1.</span> <span class="toc-text"> 漏桶算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95"><span class="toc-number">1.13.3.2.</span> <span class="toc-text"> 令牌桶算法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8C%85%E8%B0%83%E5%BA%A6"><span class="toc-number">1.13.4.</span> <span class="toc-text"> 数据包调度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.14.</span> <span class="toc-text"> 三层交换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF"><span class="toc-number">1.14.1.</span> <span class="toc-text"> 技术背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E7%9A%84%E5%8A%A8%E6%9C%BA"><span class="toc-number">1.14.2.</span> <span class="toc-text"> 三层交换的动机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.14.3.</span> <span class="toc-text"> 三层交换机的工作原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn-virtual-private-network"><span class="toc-number">1.15.</span> <span class="toc-text"> 虚拟专用网VPN (Virtual Private Network)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vpn%E7%9A%84%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF"><span class="toc-number">1.15.1.</span> <span class="toc-text"> VPN的技术背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vpn%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.15.2.</span> <span class="toc-text"> VPN的原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">1.15.3.</span> <span class="toc-text"> 实现方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv6%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.16.</span> <span class="toc-text"> IPV6协议</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://npc0vo.github.io/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Npc"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Npc | Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">计算机网络学习笔记3</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="Created: 2024-07-14 14:10:50" itemprop="dateCreated datePublished" datetime="2024-07-14T14:10:50+08:00">2024-07-14</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="Modified: 2024-07-25 10:40:39" itemprop="dateModified" datetime="2024-07-25T10:40:39+08:00">2024-07-25</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="Word count in article"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="Word count in article">7.6k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Reading time"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="Reading time">26m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="--text-color:#FB7299" itemprop="url" rel="index"><span itemprop="text">学习笔记</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">学习笔记</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h2 id="chap4-网络层"><a class="markdownIt-Anchor" href="#chap4-网络层"></a> Chap4 网络层</h2>
<h3 id="网络层概述"><a class="markdownIt-Anchor" href="#网络层概述"></a> 网络层概述</h3>
<p>网络层在<strong>数据链路层</strong>提供的两个相邻端点之间的<strong>数据帧的传送功能</strong>上，<strong>进一步管理网络中的数据通信</strong>，将数据<strong>设法从源端经过若干个中间节点传送到目的端</strong>，从而向运输层提供最基本的端到端的数据传送服务。</p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70.png" class="" alt="在这里插入图片描述" loading="lazy">
<h3 id="网络层关键功能"><a class="markdownIt-Anchor" href="#网络层关键功能"></a> 网络层关键功能</h3>
<ul>
<li>路由（控制面）
<ul>
<li>选择数据报从源端到目的端的路径</li>
<li>核心：路由算法与协议</li>
</ul>
</li>
<li>转发（数据面）
<ul>
<li>将数据报从路由器的输入接口传送到正确的输出接口</li>
</ul>
</li>
</ul>
<h3 id="internet国际协议"><a class="markdownIt-Anchor" href="#internet国际协议"></a> Internet国际协议</h3>
<h4 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h4>
<p>IPv4协议，网际协议版本4，一种无连接的协议，是互联网的核心，也是使用最广泛的网际协议版本，其后继版本为IPv6</p>
<h4 id="基本功能"><a class="markdownIt-Anchor" href="#基本功能"></a> 基本功能</h4>
<ul>
<li>寻址(addressing)</li>
<li>分片(fragmentation)</li>
</ul>
<h4 id="ipv4数据报格式"><a class="markdownIt-Anchor" href="#ipv4数据报格式"></a> IPV4数据报格式</h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476647642-3.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>版本： 4bit ，表示采用的IP协议版本</li>
<li>首部长度： 4bit，表示整个IP数据报首部的长度</li>
<li>区分服务： 8bit ，该字段一般情况下不使用</li>
<li>总长度： 16bit ，表示整个IP报文的长度,能表示的最大字节为2^16-1=65535字节</li>
<li>标识： 16bit ， IP软件通过计数器自动产生，每产生1个数据报计数器加1；在ip分片以后，用来标识同一片分片</li>
<li>标志： 3bit，目前只有两位有意义。<br />
MF，置1表示后面还有分片，置0表示这是数据报片的最后1个；<br />
DF，不能分片标志，置0时表示允许分片</li>
<li>片偏移： 13bit，表示IP分片后，相应的IP片在总的IP片的相对位置</li>
<li>生存时间TTL(Time To Live) ：8bit,表示数据报在网络中的生命周期，用通过路由器的数量来计量，即跳数（每经过一个路由器会减1）</li>
<li>协议：8bit，标识上层协议（TCP/UDP/ICMP…）</li>
<li>首部校验和：16bit ，对数据报首部进行校验，不包括数据部分</li>
<li>源地址：32bit，标识IP片的发送源IP地址</li>
<li>目的地址：32bit，标识IP片的目的地IP地址</li>
<li>选项：可扩充部分，具有可变长度，定义了安全性、严格源路由、松散源路由、记录路由、时间戳等选项</li>
<li>填充：用全0的填充字段补齐为4字节的整数倍</li>
</ul>
<h4 id="数据报分片"><a class="markdownIt-Anchor" href="#数据报分片"></a> 数据报分片</h4>
<h5 id="分片原因"><a class="markdownIt-Anchor" href="#分片原因"></a> 分片原因</h5>
<p>数据报长度大于传输链路的MTU</p>
<blockquote>
<p>MTU（Maximum Transmission Unit）, 最大传输单元</p>
<ul>
<li>链路MTU</li>
<li>路径MTU (Path MTU)</li>
</ul>
</blockquote>
<h5 id="分片策略"><a class="markdownIt-Anchor" href="#分片策略"></a> 分片策略</h5>
<ul>
<li>允许途中分片：根据下一跳链路的MTU实施分片</li>
<li>不允许途中分片：发出的数据报长度小于路径MTU（路径MTU发现机制）</li>
</ul>
<p><strong>重组策略</strong></p>
<ul>
<li>途中重组，实施难度太大</li>
<li>目的端重组（互联网采用的策略）</li>
<li>重组所需信息：原始数据报编号、分片偏移量、是否收集所有分片</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476903371-6.png" class="" alt="在这里插入图片描述" loading="lazy">
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476906604-9.png" class="" alt="在这里插入图片描述" loading="lazy">
<blockquote>
<p>IPv4分片策略</p>
<p>IPv4分组在传输途中可以多次分片<br />
源端系统，中间路由器（可通过标志位设定是否允许路由器分片，DF标志位）<br />
IPv4分片只在目的IP对应的目的端系统进行重组<br />
IPv4分片、重组字段在基本IP头部<br />
标识、标志、片偏移<br />
IPv6分片机制有较大变化（见IPv6部分的介绍）</p>
</blockquote>
<p>分组(packet)与帧(frame)的关系</p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721476944922-12.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="ip协议以及报头字段总结"><a class="markdownIt-Anchor" href="#ip协议以及报头字段总结"></a> IP协议以及报头字段总结</h4>
<h5 id="网络层基本功能"><a class="markdownIt-Anchor" href="#网络层基本功能"></a> 网络层基本功能</h5>
<ul>
<li>
<p>支持多跳寻路将IP数据报送达目的端：<strong>目的IP地址</strong></p>
</li>
<li>
<p>表明发送端身份：<strong>源IP地址</strong></p>
</li>
<li>
<p>根据IP头部协议类型，提交给不同上层协议处理：<strong>协议</strong></p>
</li>
</ul>
<p><strong>其它相关问题</strong></p>
<ul>
<li>
<p>数据报长度大于传输链路的MTU的问题，通过<strong>分片机制</strong>解决：<strong>标识、标志、片偏移</strong></p>
</li>
<li>
<p>防止循环转发浪费网络资源（路由错误、设备故障…），通过<strong>跳数限制</strong>解决：<strong>生存时间TTL</strong></p>
</li>
<li>
<p>IP报头错误导致无效传输，通过<strong>头部机校验</strong>解决：<strong>首部校验和</strong></p>
</li>
</ul>
<h3 id="ip地址"><a class="markdownIt-Anchor" href="#ip地址"></a> IP地址</h3>
<h4 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h4>
<ul>
<li>
<p><strong>IP地址</strong>，网络上的每一台主机（或路由器）的每一个接口都会分配一个全球唯一的32位的标识符</p>
</li>
<li>
<p>将IP地址划分为固定的类，每一类都由两个字段组成</p>
</li>
<li>
<p>网络号相同的这块连续IP地址空间称为地址的<strong>前缀</strong>，或<strong>网络前缀</strong></p>
</li>
<li>
<p>IP地址共分为A、B、C、D、E五类，A类、B类、C类为单播地址</p>
</li>
<li>
<p>P地址的书写采用点分十进制记法，其中每一段取值范围为0到255</p>
</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477147753-15.png" class="" alt="在这里插入图片描述" loading="lazy">
<p><strong>IP特殊地址</strong></p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477158853-18.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="子网划分"><a class="markdownIt-Anchor" href="#子网划分"></a> 子网划分</h4>
<ul>
<li>
<p>子网划分(subnetting)，在网络内部将一个网络块进行划分以供多个内部网络使用，对外仍是一个网络</p>
</li>
<li>
<p>子网(subnet )，一个网络进行子网划分后得到的一系列结果网络称为子网</p>
</li>
<li>
<p>子网掩码(subnet mask )，与 IP 地址一一对应，是32 bit 的二进制数，置1表示网络位，置0表示主机位</p>
</li>
<li>
<p>子网划分减少了 IP 地址的浪费、网络的组织更加灵活、便于维护和管理</p>
</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477247006-21.png" class="" alt="在这里插入图片描述" loading="lazy">
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477278031-24.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="无类域间路由"><a class="markdownIt-Anchor" href="#无类域间路由"></a> 无类域间路由</h4>
<ul>
<li>将32位的IP地址划分为前后两个部分，并采用斜线记法，即在IP地址后加上“/”，然后再写上网络前缀所占位数</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/20210630211225120.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>
<p>一个 CIDR 地址块可以表示很多地址，这种地址的聚合常称为<strong>路由聚合</strong>（route aggregation），也称为<strong>构成超网 (supernet)</strong></p>
</li>
<li>
<p>聚合技术在Internet中大量使用，它允许前缀重叠，数据包按具体路由的方向发送，即具有最少IP地址的<strong>最长匹配前缀</strong></p>
</li>
</ul>
<blockquote>
<p>注：当路由器收到一个IP数据包时，它会将数据包的目的IP地址与自己本地路由表中的所有路由表进行<strong>逐位（Bit-By-Bit）对比</strong>，直到找到<strong>匹配度最长</strong>的条目，这就是<strong>最长前缀匹配机制</strong>。（路由比对之前会用相应路由的目的网络掩码进行逻辑与运算，再拿结果与路由路径比对）</p>
</blockquote>
<h3 id="dhcp动态主机配置协议"><a class="markdownIt-Anchor" href="#dhcp动态主机配置协议"></a> DHCP动态主机配置协议</h3>
<p>DHCP ：<strong>动态主机配置协议</strong></p>
<ul>
<li>当主机加入IP网络，允许主机从DHCP服务器动态获取IP地址</li>
<li>可以有效利用IP地址，方便移动主机的地址获取</li>
</ul>
<p>工作模式：<strong>客户/服务器模式（ C/S ）</strong><br />
基于 UDP 工作，服务器运行在 67 号端口， 客户端运行在 68 号端口</p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477584269-29.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>DHCP 客户从UDP端口68以广播形式向服务器发送发现报文（DHCPDISCOVER）</li>
<li>DHCP 服务器广播发出提供报文（DHCPOFFER）</li>
<li>DHCP 客户从多个DHCP服务器中选择一个，并向其以广播形式发送DHCP请求报文（DHCPREQUEST）</li>
<li>被选择的DHCP服务器广播发送确认报文（DHCPACK）</li>
</ul>
<h3 id="arp地址解析协议"><a class="markdownIt-Anchor" href="#arp地址解析协议"></a> ARP地址解析协议</h3>
<p>背景<br />
网络设备有数据要发送给另一台网络设备时，必须要知道对方的网络层地址（即IP地址）。IP地址由网络层来提供，但是仅有IP地址是不够的，IP数据报文必须封装成帧才能通过数据链路进行发送。<strong>数据帧必须要包含目的MAC地址</strong>，因此发送端还必须获取到目的MAC地址。通过<strong>目的IP地址获取的MAC地址的过程是由ARP</strong>（Address Resolution Protocol）协议来实现的。</p>
<p><strong>注：因为下层协议是通过MAC地址来确定各自身份的，所以下层发送必须要MAC地址</strong></p>
<h4 id="ip-与-mac地址"><a class="markdownIt-Anchor" href="#ip-与-mac地址"></a> <strong>IP 与 MAC地址</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477764029-32.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="arp协议工作过程"><a class="markdownIt-Anchor" href="#arp协议工作过程"></a> <strong>ARP协议工作过程</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477783158-35.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>A已知B的IP地址，需要获得B的MAC地址（物理地址）</li>
<li>如果A的ARP表中缓存有B的IP地址与MAC地址的映射关系，则直接从ARP表获取</li>
<li>如果A的ARP表中未缓存有B的IP地址与MAC地址的映射关系，则A广播包含B的IP地址的ARP query分组</li>
<li>在局域网上的所有节点都可以接收到ARP query</li>
<li>B接收到ARP query分组后，将自己的MAC地址发送给A</li>
<li>A在ARP表中缓存B的IP地址和MAC地址的映射关系
<ul>
<li>超时时删除</li>
</ul>
</li>
</ul>
<h4 id="路由到另一个局域网"><a class="markdownIt-Anchor" href="#路由到另一个局域网"></a> <strong>路由到另一个局域网</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721477831964-38.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>A创建IP数据包（源为A、目的为E）</li>
<li>在源主机A的路由表中找到路由器R的IP地址223.1.1.4</li>
<li>A根据R的IP地址223.1.1.4，使用ARP协议获得R的MAC地址</li>
<li>A创建数据帧（目的地址为R的MAC地址）</li>
<li>数据帧中封装A到E的IP数据包</li>
<li>A发送数据帧，R接收数据帧</li>
</ul>
<h3 id="网络地址转换nat"><a class="markdownIt-Anchor" href="#网络地址转换nat"></a> 网络地址转换NAT</h3>
<h4 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> <strong>定义</strong></h4>
<p>网络地址转换(NAT)用于解决IPv4地址不足的问题，是一种将私有（保留）地址转化为公有IP地址的转换技术</p>
<p>私有IP地址：<br />
A类地址：10.0.0.0–10.255.255.255<br />
B类地址：172.16.0.0–172.31.255.555<br />
C类地址：192.168.0.0–192.168.255.255</p>
<h4 id="nat工作机制"><a class="markdownIt-Anchor" href="#nat工作机制"></a> <strong>NAT工作机制</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478028837-41.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>
<p><strong>出数据报</strong>：外出数据报用 NAT IP地址(全局), 新port # 替代 源IP地址(私有), port #</p>
</li>
<li>
<p><strong>NAT转换表</strong>：每个 (源IP地址, port #)到(NAT IP地址, 新port #) 映射项</p>
</li>
<li>
<p><strong>入数据报</strong>：对每个入数据报的地址字段用存储在NAT表中的(源IP地址, port #)替代对应的 (NAT IP地址, 新port #)</p>
</li>
<li>
<p>NAT根据不同的IP上层协议进行NAT表项管理<br />
TCP，UDP，ICMP</p>
</li>
<li>
<p>传输层TCP/UDP拥有16-bit 端口号字段<br />
所以一个WAN侧地址可支持60,000个并行连接</p>
</li>
</ul>
<p><strong>NAT的优势</strong></p>
<ul>
<li>节省合法地址，减少地址冲突</li>
<li>灵活连接Internet</li>
<li>保护局域网的私密性</li>
</ul>
<h3 id="icmp-互联网控制报文协议"><a class="markdownIt-Anchor" href="#icmp-互联网控制报文协议"></a> ICMP: 互联网控制报文协议</h3>
<h4 id="icmp-互联网控制报文协议-2"><a class="markdownIt-Anchor" href="#icmp-互联网控制报文协议-2"></a> <strong>ICMP: 互联网控制报文协议</strong></h4>
<ul>
<li>ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告</li>
<li>由主机和路由器用于网络层信息的通信</li>
<li>ICMP 报文携带在IP 数据报中： IP上层协议号为1</li>
</ul>
<h4 id="icmp报文类型"><a class="markdownIt-Anchor" href="#icmp报文类型"></a> <strong>ICMP报文类型</strong></h4>
<ul>
<li>ICMP 差错报告报文
<ul>
<li>终点不可达：不可达主机、不可达网络，无效端口、协议</li>
</ul>
</li>
<li>ICMP 询问报文
<ul>
<li>回送请求/回答 (ping使用)</li>
</ul>
</li>
</ul>
<h4 id="icmp-报文格式"><a class="markdownIt-Anchor" href="#icmp-报文格式"></a> <strong>ICMP 报文格式</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478143918-44.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>ICMP报文的前 4 个字节包含格式统一的三个字段：类型、代码、检验和</li>
<li>相邻的后四个字节内容与ICMP的报文类型有关</li>
</ul>
<h4 id="icmp报文类型及功能"><a class="markdownIt-Anchor" href="#icmp报文类型及功能"></a> <strong>ICMP报文类型及功能</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478181593-47.png" class="" alt="在这里插入图片描述" loading="lazy">
<h3 id="路由算法"><a class="markdownIt-Anchor" href="#路由算法"></a> 路由算法</h3>
<p>路由算法须满足的特性：</p>
<ul>
<li>正确性</li>
<li>简单性</li>
<li>鲁棒性</li>
<li>稳定性</li>
<li>公平性</li>
<li>有效性</li>
</ul>
<p>根据路由算法是否随网络的通信量或拓扑自适应划分</p>
<ul>
<li>静态路由选择策略（非自适应路由选择）</li>
<li>动态路由选择策略（自适应路由选择）</li>
</ul>
<h4 id="距离向量路由"><a class="markdownIt-Anchor" href="#距离向量路由"></a> 距离向量路由</h4>
<p>算法基本思想</p>
<p>每个节点周期性地向邻居发送它自己到某些节点的距离向量；</p>
<p>当节点x接收到来自邻居的新DV估计，它使用B-F方程更新其自己的DV :<br />
Dx(y) ← minv{c(x,v) + Dv(y)} for each node y ∊ N</p>
<p>上述过程迭代执行，Dx(y)收敛为实际最小费用 dx(y)</p>
<ul>
<li>距离向量算法特点：<strong>迭代的、分布式的</strong>
<ul>
<li>每次本地迭代由下列引起: 本地链路费用改变、邻居更新报文</li>
<li>分布式:各节点依次计算，相互依赖</li>
</ul>
</li>
</ul>
<p>注：路由器只掌握物理相连的邻居以及链路费用</p>
<h5 id="算法过程"><a class="markdownIt-Anchor" href="#算法过程"></a> 算法过程</h5>
<ol>
<li>路由器启动时初始化自己的路由表
<ul>
<li>初始路由表包含所有直接相连的网络路径，距离均为0<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478293990-54.png" class="" alt="在这里插入图片描述" loading="lazy">
</li>
</ul>
</li>
<li>路由器周期性地向其相邻路由器广播自己知道的路由信息</li>
<li>相邻路由器可以根据收到的路由信息修改和刷新自己的路由表</li>
</ol>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478321968-57.png" class="" alt="在这里插入图片描述" loading="lazy">
<ol start="4">
<li>
<p>路由器经过若干次更新后，最终都会知道到达所有网络的最短距离</p>
</li>
<li>
<p>所有的路由器都得到正确的路由选择信息时网络进入“收敛”（convergence）状态</p>
</li>
</ol>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478351584-60.png" class="" alt="在这里插入图片描述" loading="lazy">
<h5 id="特殊情况考虑"><a class="markdownIt-Anchor" href="#特殊情况考虑"></a> 特殊情况考虑</h5>
<p><strong>计数到无穷问题（The Count-to-Infinity Problem）</strong></p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478366407-63.png" class="" alt="在这里插入图片描述" loading="lazy">
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478371392-66.png" class="" alt="在这里插入图片描述" loading="lazy">
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478378629-69.png" class="" alt="在这里插入图片描述" loading="lazy">
<p><strong>好消息传播快，坏消息传播慢</strong>，是距离向量路由的一个主要缺点</p>
<h4 id="链路状态路由"><a class="markdownIt-Anchor" href="#链路状态路由"></a> 链路状态路由</h4>
<p>注：所有路由器掌握完整的网络拓扑和链路费用信息</p>
<h5 id="算法过程-2"><a class="markdownIt-Anchor" href="#算法过程-2"></a> 算法过程</h5>
<p>链路状态（Link State）路由可分为五个部分：</p>
<ol>
<li>
<p>发现邻居，了解他们的网络地址；</p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478428438-72.png" class="" alt="在这里插入图片描述" loading="lazy">
</li>
<li>
<p>设置到每个邻居的成本度量</p>
</li>
</ol>
<blockquote>
<p>开销/度量/代价：<br />
自动发现设置或人工配置<br />
度量：带宽、跳数、延迟、负载、可靠性等<br />
常用度量：链路带宽（反比）<br />
例如：1-Gbps以太网的代价为1，100-Mbps以太网的代价为10<br />
可选度量：延迟<br />
发送一个echo包，另一端立即回送一个应答<br />
通过测量往返时间RTT，可以获得一个合理的延迟估计值</p>
</blockquote>
<ol start="3">
<li>构造一个分组，分组中包含刚收到的所有信息；</li>
</ol>
<p>构造链路状态分组（link state packet，LSP）</p>
<ul>
<li>发送方标识</li>
<li>序列号</li>
<li>年龄</li>
<li>邻居列表</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478508030-75.png" class="" alt="在这里插入图片描述" loading="lazy">
<ol start="4">
<li>将此分组发送给其他的路由器；</li>
</ol>
<ul>
<li>每个LSP分组包含一个序列号，且递增</li>
<li>路由器记录所收到的所有（源路由器、序列号）对</li>
<li>当一个新分组到达时，路由器根据记录判断：
<ul>
<li>如果是新分组，洪泛广播</li>
<li>如果是重复分组，丢弃</li>
<li>如果是过时分组，拒绝</li>
</ul>
</li>
</ul>
<ol start="5">
<li>计算到其他路由器的最短路径。</li>
</ol>
<p>Dijkstra算法示例<br />
D(k)：从计算节点到目的节点k当前路径代价<br />
p(k)：从计算节点到目的节点k的路径中k节点的前继节点</p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478543030-78.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="距离向量和链路状态算法比较"><a class="markdownIt-Anchor" href="#距离向量和链路状态算法比较"></a> 距离向量和链路状态算法比较</h4>
<p>网络状态信息交换的范围</p>
<ul>
<li>DV:邻居间交换</li>
<li>LS:全网扩散</li>
</ul>
<p>网络状态信息的可靠性</p>
<ul>
<li>DV:部分道听途说</li>
<li>LS:自己测量</li>
</ul>
<h4 id="层次路由"><a class="markdownIt-Anchor" href="#层次路由"></a> 层次路由</h4>
<h5 id="产生原因"><a class="markdownIt-Anchor" href="#产生原因"></a> 产生原因</h5>
<p>过于庞大的路由表存储、查找困难，路由信息交互开销高</p>
<p>现实情况：</p>
<p>地址分配往往是随机的，难以进行高效的地址聚合<br />
每个网络的网络管理员有自己的管理方法和思路，并不希望每个路由器都干涉本网络内部的地址分配等问题<br />
层次路由可以解决：</p>
<p>网络扩展性问题：当网络扩大时，控制路由表条目和路由表存储空间的增长<br />
管理的自治问题：网络管理员可以控制和管理自己网络的路由</p>
<h5 id="基本思路"><a class="markdownIt-Anchor" href="#基本思路"></a> 基本思路</h5>
<p>互联网由大量不同的网络互连，每个管理机构控制的网络是自治的</p>
<p>自治系统（AS，Autonomous System）</p>
<p>一个管理机构控制之下的网络<br />
一个AS内部通常使用相同的路由算法/路由协议，使用统一的路由度量（跳数、带宽、时延 …）<br />
不同的AS可以使用不同的路由算法/路由协议<br />
每个AS有一个全球唯一的ID号：AS ID<br />
自治系统内的还可以进一步划分层次：私有自治系统或区域</p>
<h5 id="效果"><a class="markdownIt-Anchor" href="#效果"></a> <strong>效果</strong></h5>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478598864-81.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="广播路由"><a class="markdownIt-Anchor" href="#广播路由"></a> 广播路由</h4>
<p><strong>广播（Broadcasting）：源主机同时给全部目标地址发送同一个数据包</strong></p>
<h5 id="实现方法"><a class="markdownIt-Anchor" href="#实现方法"></a> 实现方法</h5>
<p>①给每个主机单独发送一个数据包</p>
<p>效率低、浪费带宽<br />
Server需要知道每个目的地址<br />
②多目标路由（multi-destination routing）</p>
<p>在需要转发的路由器线路复制一次该数据报<br />
网络利用率高<br />
Server依然需要知道所有的目的地址</p>
<p>③泛洪（flooding）</p>
<ul>
<li>一种将数据包发送到所有网络节点的简单方法</li>
<li>将每个进入数据包发送到除了进入线路外的每条出去线路</li>
</ul>
<p>用途</p>
<ul>
<li>保证性：一种有效广播手段，可确保数据包被传送到网络中每个节点</li>
<li>鲁棒性：即使大量路由器被损坏，也能找到一条路径（如果存在）</li>
<li>简单性：仅需知道自己的邻居</li>
</ul>
<p>无控制的泛洪</p>
<p>实现广播最显而易见的技术<br />
环路可能导致广播风暴<br />
路由器可能收到多个副本<br />
节点需要跟踪已泛洪的数据包以阻止洪泛<br />
即使利用跳数来限制，也会出现成倍爆炸<br />
解决方法：受控制的泛洪（每个路由器进行有选择的泛洪）</p>
<p>序号控制泛洪<br />
逆向路径转发<br />
④生成树（spanning tree）</p>
<p>源节点向所有属于该生成树的特定链路发送分组<br />
改进了逆向路径转发<br />
没有环路<br />
最佳使用带宽<br />
最少副本，消除了冗余分组<br />
一个路由器可以不必知道整颗树，只需要知道在一颗树中的邻居即可</p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478726197-84.png" class="" alt="在这里插入图片描述" loading="lazy">
<h3 id="internet路由协议"><a class="markdownIt-Anchor" href="#internet路由协议"></a> Internet路由协议</h3>
<h4 id="路由选择协议"><a class="markdownIt-Anchor" href="#路由选择协议"></a> 路由选择协议</h4>
<h5 id="概述-2"><a class="markdownIt-Anchor" href="#概述-2"></a> 概述</h5>
<p>路由选择协议RIP（ Routing Information Protocol）是基于距离矢量算法的协议<br />
使用跳数衡量到达目的网络的距离<br />
RIP 认为一个好的路由就是它通过的路由器的数目少，即“距离短”<br />
RIP 允许一条路径最多只能包含 15 个路由器<br />
RIP协议的基本思想<br />
仅和相邻路由器交换信息<br />
路由器交换的内容是自己的路由表<br />
周期性更新：30s</p>
<h5 id="工作过程"><a class="markdownIt-Anchor" href="#工作过程"></a> <strong>工作过程</strong></h5>
<ul>
<li>初始化</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478793690-87.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>周期性更新</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478804134-90.png" class="" alt="在这里插入图片描述" loading="lazy">
<h5 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h5>
<p>RIP协议的特点</p>
<ul>
<li>算法简单，易于实现</li>
<li>收敛慢</li>
<li>需要交换的信息量较大</li>
</ul>
<p>RIP协议的适用场合</p>
<ul>
<li>中小型网络</li>
</ul>
<p>RIP协议的防环路机制</p>
<ul>
<li>触发更新</li>
<li>毒性反转</li>
<li>水平分割</li>
<li>其他</li>
</ul>
<h4 id="bgp-外部网关路由协议"><a class="markdownIt-Anchor" href="#bgp-外部网关路由协议"></a> BGP-外部网关路由协议</h4>
<p>路由协议</p>
<ul>
<li>内部网关协议 IGP： 有 RIP 和、OSPF、ISIS 等多种具体的协议</li>
<li>外部网关协议 EGP：目前使用的协议就是 BGP</li>
</ul>
<p>边界网关协议<strong>BGP (Border Gateway Protocol)</strong></p>
<ul>
<li>目前互联网中唯一实际运行的自治域间的路由协议</li>
</ul>
<p>BGP功能</p>
<ul>
<li>eBGP：从相邻的AS获得网络可达信息</li>
<li>iBGP： 将网络可达信息传播给AS内的路由器</li>
<li>基于网络可达信息和策略决定到其他网络的“最优”路由</li>
</ul>
<p>BGP会话: 两个BGP路由器通过TCP连接交换BGP报文</p>
<ul>
<li>通告到不同网络前缀的路径，即路径向量协议</li>
</ul>
<p><strong>BGP路径通告</strong></p>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721478884414-93.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>AS2的路由器2c从AS3的路由器3a接收到路径AS3, X</li>
<li>根据AS2的策略，AS2的路由器2c接受路径AS3, X，通过iBGP传播给AS2的所有路由器</li>
<li>根据AS2策略，AS2的路由器2a通过eBGP向AS1的路由器1c通告从AS3的路由器3a接收到路径AS2, AS3, X</li>
</ul>
<h3 id="路由器的工作原理"><a class="markdownIt-Anchor" href="#路由器的工作原理"></a> 路由器的工作原理</h3>
<h4 id="概述-3"><a class="markdownIt-Anchor" href="#概述-3"></a> 概述</h4>
<p>路由器是互联网最主要的网络设备，包含2个核心功能</p>
<ul>
<li>控制层：运行各种路由协议：BGP、OSPF、RIP，学习去往不同目的的转发路径：路由表</li>
<li>数据层：根据上述路由表，将收到的IP分组转发到正确的下一跳链路</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479085515-96.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="路由器控制层"><a class="markdownIt-Anchor" href="#路由器控制层"></a> 路由器控制层</h4>
<ul>
<li>路由器可同时运行多个路由协议</li>
<li>路由器也可不运行任何路由协议，只使用静态路由和直连路由</li>
<li>路由管理根据路由优先级，选择最佳路由，形成核心路由表</li>
<li>控制层将核心路由表下发到数据层，形成转发表（FIB）</li>
<li>若存在多个“去往同一目的IP前缀”的不同类型路由，路由器根据优先级选择最佳路由</li>
<li>优先级数值越小，优先级越高</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479116655-99.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="路由器数据层"><a class="markdownIt-Anchor" href="#路由器数据层"></a> 路由器数据层</h4>
<p>路由器中IP报文转发核心功能</p>
<ul>
<li>
<p>链路层解封装，IP头部校验</p>
</li>
<li>
<p>获取报文目的IP地址</p>
</li>
<li>
<p>用目的IP地址，基于最长前缀匹配规则查询转发表</p>
</li>
<li>
<p>查询失败，丢弃报文</p>
</li>
<li>
<p>查询成功</p>
<ul>
<li>获取转发出接口和下一跳IP地址</li>
<li>IP头部“TTL”字段值减1，重新计算IP头部“校验和”</li>
<li>重新进行链路层封装，发送报文</li>
</ul>
</li>
</ul>
<p>注：<strong>普通IP报文转发过程中，路由器不查看传输层及以上层协议的内容</strong></p>
<ul>
<li>
<p>IP报文在路由器转发前后的变化</p>
<ul>
<li><strong>链路层封装更新，IP头部“TTL”减1，IP头部“校验和”更新</strong></li>
</ul>
</li>
<li>
<p>数据报在不同硬件单元的处理</p>
<ul>
<li>报文输入的接口卡
<ul>
<li>链路层解封装</li>
<li>转发表查询（该工作在输入接口卡处理）</li>
<li>通过交换结构将报文排队发往目的接口卡（发送过快将产生拥塞）</li>
</ul>
</li>
<li>交换结构
<ul>
<li>从输入接口卡发往输出接口卡</li>
</ul>
</li>
<li>报文输出的接口卡
<ul>
<li>从交换结构接收报文（排队进行后续处理，到达太快将产生拥塞）</li>
<li>链路层封装</li>
<li>从输出接口发送报文</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3种典型的交换结构"><a class="markdownIt-Anchor" href="#3种典型的交换结构"></a> <strong>3种典型的交换结构</strong></h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479218048-102.png" class="" alt="在这里插入图片描述" loading="lazy">
<h3 id="拥塞控制算法"><a class="markdownIt-Anchor" href="#拥塞控制算法"></a> 拥塞控制算法</h3>
<h4 id="概述-4"><a class="markdownIt-Anchor" href="#概述-4"></a> 概述</h4>
<p>网络中存在太多的数据包导致数据包传输延迟或丢失，从而导致网络吞吐量下降</p>
<h5 id="拥塞控制congestion-control"><a class="markdownIt-Anchor" href="#拥塞控制congestion-control"></a> <strong>拥塞控制（congestion control）</strong></h5>
<p>需要确保通信子网能够承载用户提交的通信量，是一个全局性问题，涉及主机、路由器等多种因素</p>
<h5 id="产生拥塞的原因"><a class="markdownIt-Anchor" href="#产生拥塞的原因"></a> <strong>产生拥塞的原因</strong></h5>
<ul>
<li>主机发送到网络的数据包数量过多，超过了网络的承载能力</li>
<li>突发的流量填满了路由器的缓冲区，造成某些数据包会被丢弃</li>
</ul>
<h5 id="拥塞控制的基本策略"><a class="markdownIt-Anchor" href="#拥塞控制的基本策略"></a> <strong>拥塞控制的基本策略</strong></h5>
<ul>
<li>
<p>开环控制</p>
<p>----事先对通信流参数进行协商，协商后，不管网络是拥塞还是带宽充足，参数不能动态改变</p>
<ul>
<li>开环控制属于预防性拥塞控制，它竭力使网络总是处于无拥塞状态运行。开环控制的方法包括决定什么时候接受新流量，什么时候丢弃数据包和丢弃哪些数据包。其缺点是没有考虑网络的当前状态</li>
</ul>
</li>
<li>
<p><strong>闭环控制</strong>—根据网络状态进行<strong>动态控制</strong>，包括两部分：<strong>反馈机制</strong>和<strong>控制机制</strong>。闭环控制方法分为两个子类：<strong>显式反馈</strong>与<strong>隐式反馈</strong></p>
</li>
</ul>
<h4 id="流量调节"><a class="markdownIt-Anchor" href="#流量调节"></a> 流量调节</h4>
<ul>
<li>
<p><strong>抑制包(Choke Packets)</strong>：用于通知发送方减小发送量，路由器选择一个被拥塞的数据包，给该数据包的源主机返回一个抑制包，抑制包中的目的地址取自该拥塞数据包。源主机收到抑制包后，减少发向特定目的地址的流量</p>
</li>
<li>
<p><strong>逐跳的抑制包(Hop-by-Hop Choke Packets)</strong>：在高速或长距离网络中，由于源主机响应太慢，抑制包算法对拥塞控制的效果并不好，可采用逐跳抑制方法；其核心思想是抑制包对它经过的每个路由器都起作用，能够迅速缓解发生拥塞处的拥塞，但要求上游路由器有更大的缓冲区</p>
</li>
<li>
<p><strong>显式拥塞通告（ECN，Explicit Congestion Notification）</strong>，在IP包头中记录数据包是否经历了拥塞。在数据包转发过程中，路由器可以在包头中标记为经历拥塞，然后接收方在它的下一个应答数据包里显示该标记作为显式拥塞信号</p>
</li>
<li>
<p><strong>RFC2474中重新定义TOS域为包含一个6位的区分服务码点(DSCP)</strong> 和2位未使用位；<strong>RFC3168重新定义RFC2474中TOS域未使用的两位为ECN域</strong>，包含如下值：<br />
00：发送主机不支持ECN<br />
01或者10：发送主机支持ECN<br />
11：路由器正在经历拥塞</p>
</li>
</ul>
<h4 id="随机早期检测red-random-early-detection"><a class="markdownIt-Anchor" href="#随机早期检测red-random-early-detection"></a> 随机早期检测RED (Random Early Detection)</h4>
<ul>
<li>
<p>使路由器的队列维持两个参数，即队列长度最小门限 THmin 和最大门限 THmax</p>
</li>
<li>
<p>RED 对每一个到达的数据报都先计算平均队列长度 LAV</p>
</li>
<li>
<p>若平均队列长度小于最小门限 THmin ，则将新到达的数据报放入队列进行排队</p>
</li>
<li>
<p>若平均队列长度超过最大门限 THmax，则将新到达的数据报丢弃</p>
</li>
<li>
<p>若平均队列长度在最小门限 THmin 和最大门限THmax 之间，则按照某一概率 p 将新到达的数据报丢弃</p>
</li>
<li>
<p>RED 将路由器的到达队列划分成为三个区域</p>
</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479468262-105.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="丢弃概率-p-与-thmin-和-thmax-的关系"><a class="markdownIt-Anchor" href="#丢弃概率-p-与-thmin-和-thmax-的关系"></a> <strong>丢弃概率 p 与 THmin 和 Thmax 的关系</strong></h4>
<ul>
<li>当 LAV &lt;Thmin 时，丢弃概率 p = 0</li>
<li>当 LAV &gt;Thmax 时，丢弃概率 p = 1</li>
<li>当 THmin &lt; LAV &lt; THmax时， 0 &lt; p &lt; 1<br />
例如，按线性规律变化，从 0 变到 pmax</li>
</ul>
<h3 id="服务质量"><a class="markdownIt-Anchor" href="#服务质量"></a> 服务质量</h3>
<h4 id="概述-5"><a class="markdownIt-Anchor" href="#概述-5"></a> 概述</h4>
<ul>
<li>
<p>互联网本身只能提供“尽力而为的服务”或称“尽最大努力交付的服务”</p>
</li>
<li>
<p>当互联网越来越多的用于传输多媒体信息时，由于这些实时业务对网络的传输延时、延时抖动等特性较为敏感，这样网络的传输质量就难以保障了</p>
</li>
<li>
<p>IP网络不能保证特定业务的QoS要求，已经成为IP网络发展的巨大障碍</p>
</li>
<li>
<p>网络的服务质量越来越多的引起人们的关注，甚至成为网络技术研究的热点问题</p>
</li>
</ul>
<h4 id="什么是网络服务质量qos-quality-of-service"><a class="markdownIt-Anchor" href="#什么是网络服务质量qos-quality-of-service"></a> <strong>什么是网络服务质量？（QoS, Quality of Service）</strong></h4>
<p>QoS是网络在传输数据流时要满足一系列服务请求，具体可以量化为<strong>带宽、时延、抖动、丢包率</strong>等性能指标</p>
<h4 id="流量整形"><a class="markdownIt-Anchor" href="#流量整形"></a> 流量整形</h4>
<p>流量整形(traffic shaping)：<strong>其作用是限制流出某一网络的某一连接的流量与突发，使这类报文以比较均匀的速度向外发送</strong></p>
<h5 id="漏桶算法"><a class="markdownIt-Anchor" href="#漏桶算法"></a> 漏桶算法</h5>
<ul>
<li>
<p>到达的数据包（网络层的PDU）被放置在底部具有漏孔的桶中（数据包缓存）</p>
</li>
<li>
<p>漏桶最多可以排队b个字节，漏桶的这个尺寸受限于内存。如果数据包到达的时候漏桶已经满了，那么数据包应被丢弃</p>
</li>
<li>
<p>数据包从漏桶中漏出，以常量速率（r字节/秒）注入网络，因此平滑了突发流量</p>
</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479604386-108.png" class="" alt="在这里插入图片描述" loading="lazy">
<h5 id="令牌桶算法"><a class="markdownIt-Anchor" href="#令牌桶算法"></a> 令牌桶算法</h5>
<ul>
<li>
<p>产生令牌：周期性的以速率r向令牌桶中增加令牌，桶中的令牌不断增多。如果桶中令牌数已到达上限，则丢弃多余令牌</p>
</li>
<li>
<p>消耗令牌：输入数据包会消耗桶中的令牌。在网络传输中，数据包的大小通常不一致。大的数据包相较于小的数据包消耗的令牌要多</p>
</li>
<li>
<p>判断是否通过：输入数据包经过令牌桶时存在两种可能：输出该数据包或者被丢弃。当桶中的令牌数量可以满足数据包对令牌的需求，则将数据包输出，否则将其丢弃</p>
</li>
</ul>
<blockquote>
<p>注：漏桶算法和令牌桶算法的区别在于漏桶算法输出的流量永远不可能超过一定限制，而令牌桶算法可以容忍短时间内的高流量输出，对于一些突发流量的需求比较友好</p>
</blockquote>
<h4 id="数据包调度"><a class="markdownIt-Anchor" href="#数据包调度"></a> 数据包调度</h4>
<p>在同一个流的数据包之间以及在竞争流之间<strong>分配路由器资源的算法</strong>称为<strong>包调度算法</strong>，它负责分配带宽和其他路由器资源，负责确定把缓冲区中的哪些数据包发送到输出链路上</p>
<ul>
<li>先来先服务FCFS（First-Come First-Serve）</li>
<li>公平队列算法（Fair Queueing/Round Robin）</li>
<li>加权公平队列算法（Weighted Fair Queueing）</li>
<li>优先级调度（Priority Scheduling）</li>
</ul>
<h3 id="三层交换"><a class="markdownIt-Anchor" href="#三层交换"></a> 三层交换</h3>
<h4 id="技术背景"><a class="markdownIt-Anchor" href="#技术背景"></a> 技术背景</h4>
<p>二层交换网络中的广播，限制了网络规模的扩展<br />
交换机对目标地址无法匹配的数据帧进行广播转发<br />
交换机对目标地址为广播地址的数据帧进行广播转发<br />
交换机为维护生成树状态产生大量的桥协议数据单元(Bridge Protocol Data Unit，BPDU)<br />
这些广播帧会大量消耗网络资源，并频繁影响用户的数据通信<br />
VLAN虽然可以将广播的影响限定在一定范围内，但同时也隔离了正常的用户间数据通信<br />
传统路由器致力于解决VLAN间互联互通，但是其转发效率和拓扑复杂性带来的网络通信瓶颈无法有效应对规模扩展</p>
<h4 id="三层交换的动机"><a class="markdownIt-Anchor" href="#三层交换的动机"></a> 三层交换的动机</h4>
<ul>
<li>利用第三层协议中的信息来加强第二层交换功能，形成带有路由功能的交换</li>
<li>融合VLAN 间的二层隔离和三层互通，消除大规模网络中广播对性能的影响</li>
<li>简化网络配置，简化网络拓扑，优化网络管理，降低网络部署成本</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479702586-111.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="三层交换机的工作原理"><a class="markdownIt-Anchor" href="#三层交换机的工作原理"></a> 三层交换机的工作原理</h4>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479713077-114.png" class="" alt="在这里插入图片描述" loading="lazy">
<h3 id="虚拟专用网vpn-virtual-private-network"><a class="markdownIt-Anchor" href="#虚拟专用网vpn-virtual-private-network"></a> 虚拟专用网VPN (Virtual Private Network)</h3>
<h4 id="vpn的技术背景"><a class="markdownIt-Anchor" href="#vpn的技术背景"></a> VPN的技术背景</h4>
<ul>
<li>
<p>计算机网络按用途分类</p>
<ul>
<li>专用、公用</li>
</ul>
</li>
<li>
<p>专用网络的实现方式</p>
<ul>
<li>使用专用链路：铺设、租用（费用高，不灵活）</li>
<li>使用公共链路：不安全</li>
</ul>
</li>
<li>
<p>虚拟专用网VPN (Virtual Private Network)</p>
<ul>
<li>专用网络的经济、可靠、灵活的解决方案</li>
<li>利用安全隧道技术将专用网络在公共网络上扩展</li>
</ul>
</li>
<li>
<p>VPN的设计原则</p>
<ul>
<li>安全性、隧道与加密、数据验证、用户验证、防火墙与攻击检测</li>
</ul>
</li>
</ul>
<h4 id="vpn的原理"><a class="markdownIt-Anchor" href="#vpn的原理"></a> VPN的原理</h4>
<ul>
<li>
<p>VPN指利用公用网络架设专用网络的远程访问技术</p>
</li>
<li>
<p>VPN通过隧道技术在公共网络上模拟出一条点到点的逻辑专线，从而达到安全数据传输的目的</p>
</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479766253-117.png" class="" alt="在这里插入图片描述" loading="lazy">
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479770224-120.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>VPN对数据机密性和完整性的保护</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479779966-123.png" class="" alt="在这里插入图片描述" loading="lazy">
<h4 id="实现方式"><a class="markdownIt-Anchor" href="#实现方式"></a> 实现方式</h4>
<ul>
<li>用VPN连接合作伙伴</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479827066-126.png" class="" alt="在这里插入图片描述" loading="lazy">
<ul>
<li>用VPN实现专用网络的远程访问</li>
</ul>
<img src="/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTAxODY5,size_16,color_FFFFFF,t_70-1721479836850-129.png" class="" alt="在这里插入图片描述" loading="lazy">
<h3 id="ipv6协议"><a class="markdownIt-Anchor" href="#ipv6协议"></a> IPV6协议</h3>
<p>初始动机：应付“32-bit地址空间耗尽”问题（CIDR和NAT都无法从根本上解决地址短缺问题），增加地址空间<br />
IPv6 地址</p>
<p>地址长度为128bit，是IPv4地址长度的4倍<br />
IPv6地址空间数量约为3*1038<br />
IPv6地址表示法，冒分十六进制，x : x : x : x : x : x : x : x<br />
简化方法：每个x前面的0可省略，可把连续的值为0的x表示为“::”, 且“::”只能出现1次<br />
简化前地址，2001:0DA8:0000:0000:200C:0000:0000:00A5<br />
简化后地址，2001:DA8:0000:0000:200C::A5</p>
</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2024/07/14/%E5%88%9D%E8%AF%86windbg/" rel="prev" title="初识windbg"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">初识windbg</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2024/07/13/Windows%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" rel="next" title="Windows核心编程学习笔记"><span class="post-nav-text">Windows核心编程学习笔记</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>您需要科学上网，才可使用评论区功能。</span><br></div><div id="waline"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/2024/07/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank"></a></div><div class="copyright"><span>&copy; 2023 – 2025 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Npc</span></div><div class="footer-custom-text">=w=</div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="Searching..." value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>